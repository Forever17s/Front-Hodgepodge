<h2 align="center">
 
:paw_prints: å‰ç«¯æ‚çƒ©ï¼Œè®°å½•æˆ‘è„±ç¦»ä½çº§è¶£å‘³çš„ç‚¹ç‚¹æ»´æ»´

</h2>

<div align="center">

[è®¾è®¡æ¨¡å¼](./README.md) | å‰ç«¯é¢è¯•

  <img src="./resource/interview_header.png" width="500" />

</div>

<br>

> æœ¬ç« å†…å®¹åŒ…å«ã€ Vue ã€ã€ã€ React ã€ã€ã€ ES6 ã€å’Œã€ å‰ç«¯å¸¸è¯† ã€çš„ä¸€äº›å†…å®¹ï¼Œå‡æ˜¯äº²èº«ç»å†åæ€»ç»“çš„å‰ç«¯é«˜é¢‘é¢è¯•è€ƒç‚¹ ã€‚é¢å‘ **1 - 3** å¹´å·¥ä½œç»éªŒçš„å‰ç«¯å·¥ç¨‹å¸ˆ ğŸ¦ğŸ¦ğŸ¦

### ä¸»è¦å†…å®¹åŒ…å«

- [:cyclone:å‰ç«¯åŸºç¡€](#å‰ç«¯åŸºç¡€)
- [:rocket:å‰ç«¯æ”€é˜¶](#å‰ç«¯æ”€é˜¶)
- [:ledger:å‰ç«¯å¸¸è¯†](#å‰ç«¯å¸¸è¯†)

### å‰ç«¯åŸºç¡€

#### HTML æ–‡æ¡£ä¸‰ç§å¸¸è§ DOM èŠ‚ç‚¹ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

- å…ƒç´ èŠ‚ç‚¹ï¼ˆæ ‡ç­¾ï¼‰
- æ–‡æœ¬èŠ‚ç‚¹ï¼ˆæ–‡æœ¬å†…å®¹ï¼‰
- å±æ€§èŠ‚ç‚¹ï¼ˆå…ƒç´ å±æ€§ï¼‰

#### javascript å˜é‡æå‡ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```
å¯¹äºå˜é‡ var x = 1; foo();

ç­‰åŒvar x; foo(); x = 1;ï¼ˆæå‡å˜é‡å£°æ˜ï¼Œä½†ä¸æå‡èµ‹å€¼ï¼‰

å¯¹äºå‡½æ•° function fun(){};

å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§å˜é‡ï¼Œä¹Ÿä¼šå­˜åœ¨å˜é‡ä¸Šå‡çš„ç°è±¡ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸Šå‡äº†æ•´ä¸ªå‡½æ•°

åˆ†æè¿™ç§é—®é¢˜çš„æ—¶å€™ï¼Œæœ‰æ„è¯†æ‹†åˆ†å˜é‡å£°æ˜å’Œèµ‹å€¼ï¼Œæå‡å‡½æ•°ä½ç½®ä¼šçœ‹å¾—æ›´æ˜æ˜¾
```

#### è¿ç®—ç¬¦ `&` ä¸ `&&` å’Œ `|` ä¸ `||` [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

- `&`å’Œ `|` æ—¢æ˜¯é€»è¾‘è¿ç®—ç¬¦ä¹Ÿæ˜¯ä½è¿ç®—ç¬¦ï¼Œè€Œ`&&`å’Œ`||`åªæ˜¯é€»è¾‘è¿ç®—ç¬¦
- `&`å’Œ`|`éƒ½æ˜¯å…ˆçœ‹å·¦è¾¹æˆä¸æˆç«‹ï¼Œå·¦è¾¹ä¸æˆç«‹ç›´æ¥è¾“å‡º
- `&&`å’Œ`||`ä¸¤è¾¹éƒ½è¦çœ‹ï¼Œçœ‹å®Œä¹‹åå†è¾“å‡º
- `&&`å·¦çœŸçœ‹å³ï¼Œå·¦å‡ä¸ºå‡ï¼›`||`å·¦çœŸä¸ºçœŸï¼Œå·¦å‡çœ‹å³

#### `String` å­—ç¬¦ä¸²å¯¹è±¡å±æ€§ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```
lengthã€concat(String)ã€indexOf(String)ã€substr(num1,[num2])ã€toLowerCase()ã€toUpperCase()ã€replace(str1,str2)

Dateæ—¥æœŸå¯¹è±¡ï¼šgetYear()/getFullYear()/getMonth()/getDate()...

Mathæ•°å­¦å¯¹è±¡ï¼šceil(æ•°å€¼)å‘ä¸‹å–æ•´ã€floor(æ•°å€¼)å‘ä¸Šå–æ•´ã€min(num1,num2)/max(num1,num2)è¿”å›æœ€å¤§æœ€å°å€¼ã€pow(x,n)è¿”å›xçš„næ¬¡æ–¹ã€random()ã€round(æ•°å€¼)å››èˆäº”å…¥ã€sqrt(æ•°å€¼)å¼€å¹³æ–¹
```

#### `Window` å¯¹è±¡ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

- alert
- confirm
- prompt
- close
- print
- setintval
- clearintval
- setTimeout
- clearTimeout
- window å¯¹è±¡çš„å­å¯¹è±¡ï¼š

```
  navigator(æµè§ˆå™¨ä¿¡æ¯å¯¹è±¡)

  location(åœ°å€æ å¯¹è±¡)ï¼šhost ä¸»æœºã€port ç«¯å£ã€href åœ°å€

  history(å†å²è®°å½•)ï¼šlength å†å²è®°å½•æ•°ç›®ã€back()/forward()/go()

  screen(å±å¹•å¯¹è±¡)ï¼šheight/width

  document HTML æ–‡æ¡£å¯¹è±¡
```

#### æ•°ç»„å»é‡å››ç§æ–¹å¼ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

1. é€šè¿‡æ–°å»ºæ•°ç»„ï¼Œéå†æŸ¥æ‰¾æ–¹æ³•å»é‡å­˜å…¥ï¼Œç¬¬äºŒä¸ªå¾ªç¯å¯ä»¥ç”¨`indexOf`æ›¿æ¢)

```javascript
Array.prototype.unique1 = function(arr) {
  var newArr = [];
  for (var i in arr) {
    var repeat = false;
    for (var j in newArr) {
      if (newArr[j] == arr[i]) {
        repeat = true;
        break;
      }
    }
    if (!repeat) {
      newArr.push(arr[i]);
    }
  }
  return newArr;
};
var arr = [1, "a", "a", "b", "d", "e", "e", 1, 0];
console.log(arr.unique1());
```

2. å…ˆæ’åºï¼Œå†å‘æ–°æ•°ç»„æœ€åä¸€ä½æŸ¥é‡å­˜å…¥

```javascript
Array.prototype.unique2 = function() {
  this.sort(); //å…ˆæ’åº
  var newArr = [this[0]];
  for (var i = 1; i < this.length; i++) {
    if (this[i] !== newArr[newArr.length - 1]) {
      newArr.push(this[i]);
    }
  }
  return newArr;
};
var arr = [1, "a", "a", "b", "d", "e", "e", 1, 0];
console.log(arr.unique2());
```

3. èƒ½é€šè¿‡`json`å¯¹è±¡çš„æ–¹å¼åˆ¤æ–­å»é‡å¹¶è®¡ç®—é‡å¤æ¬¡æ•°ï¼Œç¼ºç‚¹æ˜¯åªæ”¯æŒ`Numbe`r æ•°æ®ç±»å‹ï¼Œè§£å†³æ–¹å¼å¯ä»¥åœ¨`key`å€¼ä¸Šä¸‹åŠŸå¤«ï¼Œ`typeof`+`key`çš„å½¢å¼

```javascript
Array.prototype.unique3 = function() {
  var obj = {};
  for (var i = 0; i < this.length; i++) {
    if (!obj[this[i]]) {
      obj[this[i]] = 1;
    } else {
      obj[this[i]]++;
    }
  }
  return obj;
};
var arr = [112, 112, 34, "34", "ä½ å¥½", 112, 112, 34, "ä½ å¥½", "str", "str1"];
console.log(arr.unique3());
```

4. `Array.from(new Set(arr))`å¤§ç®€è‡³æ

```javascript
// å¹³é“ºå¹¶æ’åº
Array.from(new Set(arr.flat(Infinity))).sort((a, b) => !!a - b);
```

#### CSS å…ƒç´ éšè—æ˜¾ç¤º [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

- `display:none/block`

- `visibility:hidden/visible`

- `opacity:0/1`

#### æ’åº [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

- äº¤æ¢æ’åºï¼šå†’æ³¡æ’åºã€å¿«é€Ÿæ’åº
- æ’å…¥æ’åºï¼šç›´æ¥æ’å…¥æ’åºã€å¸Œå°”æ’åº
- é€‰æ‹©æ’åºï¼šç®€å•é€‰æ‹©æ’åºã€å †æ’åº
- å½’å¹¶æ’åº

##### 1ï¼‰å†’æ³¡æ’åº

```javascript
function bubbleSort(arr) {
  var len = arr.length;
  for (var i = 0; i < len; i++) {
    for (var j = 0; j < len - 1 - i; j++) {
      if (arr[j] > arr[j + 1]) {
        //ç›¸é‚»å…ƒç´ ä¸¤ä¸¤å¯¹æ¯”
        var temp = arr[j + 1]; //å…ƒç´ äº¤æ¢
        arr[j + 1] = arr[j];
        arr[j] = temp;
      }
    }
  }
  return arr;
}
```

> ç®—æ³•åˆ†æï¼šæœ€ä½³ O(n)ï¼Œæœ€å·® O(n<sup>2</sup>)ï¼Œå¹³å‡ O(n<sup>2</sup>)

##### 2ï¼‰ç®€å•é€‰æ‹©æ’åº

```javascript
function selectionSort(arr) {
  var len = arr.length;
  var minIndex, temp;
  for (var i = 0; i < len; i++) {
    minIndex = i;
    for (var j = i + 1; j < len; j++) {
      if (arr[j] < arr[minIndex]) {
        minIndex = j;
      }
    }
    temp = arr[minIndex];
    arr[minIndex] = arr[i];
    arr[i] = temp;
  }
  return arr;
}
```

> ç®—æ³•åˆ†æï¼šæœ€ä½³ O(n<sup>2</sup>)ï¼Œæœ€å·® O(n<sup>2</sup>)ï¼Œå¹³å‡ O(n<sup>2</sup>)ï¼Œååˆ†ç¨³å®š

##### 3ï¼‰æ’å…¥æ’åº

```javascript
function insertionSort(arr) {
  var len = arr.length;
  var preIndex, current;
  for (var i = 1; i < len; i++) {
    current = arr[i]; // è®°å½•å½“å‰ä½ç½®å˜é‡
    preIndex = i - 1; // å½“å‰ä½ç½®å‰ä¸€ä¸ªç´¢å¼•å€¼
    while (preIndex >= 0 && arr[preIndex] > current) {
      // ç´¢å¼•å¤§äº0å¹¶ä¸”å‰ä¸€ä¸ªå…ƒç´ æ¯”å˜é‡å¤§
      arr[preIndex + 1] = arr[preIndex]; // å°†è¯¥ç´¢å¼•ä½ç½®å…ƒç´ å‘åç§»åŠ¨ä¸€ä½
      preIndex--; // ç´¢å¼•å†æŒ‡å‘å‰ä¸€ä¸ª
    }
    arr[preIndex + 1] = current; // å°†ä¹‹å‰è®°å½•çš„é‚£ä¸ªå˜é‡æ”¾åˆ°ç´¢å¼•åä¸€ä¸ªä½ç½®
  }
  return arr;
}
```

> ç®—æ³•åˆ†æï¼šæœ€ä½³ O(n)ï¼Œæœ€å·® O(n<sup>2</sup>)ï¼Œå¹³å‡ O(n<sup>2</sup>)ï¼Œç±»ä¼¼æ‰‘å…‹ç‰Œæ­£ç‰Œ

##### 4ï¼‰å¸Œå°”æ’åº

```javascript
function shellSort(arr) {
  var len = arr.length,
    temp,
    gap = 1;
  while (gap < len / 3) {
    // åŠ¨æ€å®šä¹‰é—´éš”åºåˆ—ï¼Œæ—¢å¯ä»¥æå‰è®¾å®šå¥½é—´éš”åºåˆ—ï¼Œä¹Ÿå¯ä»¥åŠ¨æ€çš„å®šä¹‰é—´éš”åºåˆ—
    gap = gap * 3 + 1;
  }
  for (gap; gap > 0; gap = Math.floor(gap / 3)) {
    for (var i = gap; i < len; i++) {
      temp = arr[i];
      for (var j = i - gap; j > 0 && arr[j] > temp; j -= gap) {
        arr[j + gap] = arr[j];
      }
      arr[j + gap] = temp;
    }
  }
  return arr;
}
```

> ç®—æ³•åˆ†æï¼šæœ€ä½³ O(n)ï¼Œæœ€å·® O(n<sup>2</sup>)ï¼Œå¹³å‡ O(nlog2 n)

##### 5ï¼‰å½’å¹¶æ’åº

```javascript
function mergeSort(arr) {
  // é‡‡ç”¨è‡ªä¸Šè€Œä¸‹çš„é€’å½’æ–¹æ³•
  var len = arr.length;
  if (len < 2) {
    return arr;
  }
  var middle = Math.floor(len / 2),
    left = arr.slice(0, middle),
    right = arr.slice(middle);
  return merge(mergeSort(left), mergeSort(right));
}
function merge(left, right) {
  var result = [];
  console.time("å½’å¹¶æ’åºè€—æ—¶");
  while (left.length && right.length) {
    if (left[0] <= right[0]) {
      result.push(left.shift());
    } else {
      result.push(right.shift());
    }
  }
  while (left.length) result.push(left.shift());
  while (right.length) result.push(right.shift());
  console.timeEnd("å½’å¹¶æ’åºè€—æ—¶");
  return result;
}
```

> ç®—æ³•åˆ†æï¼šO(nlog2n)ã€‚åˆ†è§£ï¼šæŠ˜åŠåˆ’åˆ†ï¼Œåˆå¹¶ï¼šä¸¤ä¸¤åˆå¹¶åæ’åº

##### 6ï¼‰å¿«é€Ÿæ’åº

```javascript
function quickSort(arr) {
  let len = arr.length;
  if (len <= 1) return arr; // å¦‚æœæ•°ç»„é•¿åº¦å°äºç­‰äº1ç›´æ¥è¿”å›ï¼ˆå¾ˆå¿…è¦ï¼‰
  let midIndex = Math.floor(len / 2); // é•¿åº¦ä¸€åŠå‘ä¸Šå–æ•´è·å–ä½œä¸ºå¯¹æ¯”çš„ä¸‹æ ‡
  let midNum = arr.splice(midIndex, 1)[0]; // åœ¨æ•°ç»„ä¸­å–å‡ºå¯¹æ¯”ä¸‹æ ‡çš„é‚£ä¸ªæ•°
  let left = []; // å£°æ˜å·¦è¾¹ï¼ˆå°äºå¯¹æ¯”æ•°ï¼‰çš„é›†åˆ
  let right = []; // å£°æ˜å³è¾¹ï¼ˆå¤§äºå¯¹æ¯”æ•°ï¼‰çš„é›†åˆ
  len = arr.length;
  for (let i = 0; i < len; i++) {
    if (arr[i] < midNum) left.push(arr[i]);
    else right.push(arr[i]);
  } // éå†æ•°ç»„ï¼Œå¹¶å‘å·¦å³ä¸¤è¾¹é›†åˆå­˜å…¥å€¼
  return quickSort(left).concat([midNum], quickSort(right)); // è¿”å›é€’å½’çš„ç»„åˆé›†åˆ
}
```

> ç®—æ³•åˆ†æï¼šæœ€ä½³ O(nlog2 n)ï¼Œæœ€å·® O(n<sup>2</sup>)ï¼Œå¹³å‡ O(nlog2 n)ã€‚**å®é™…ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§æ’åºç®—æ³•ï¼Œé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜**

##### æ±‚è§£ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦çš„å…·ä½“æ­¥éª¤ï¼š

```
ä¸€ã€æ‰¾å‡ºç®—æ³•ä¸­åŸºæœ¬è¯­å¥ï¼›

äºŒã€è®¡ç®—åŸºæœ¬è¯­å¥çš„æ‰§è¡Œæ¬¡æ•°çš„æ•°é‡çº§ï¼›

ä¸‰ã€ç”¨å¤§ O è®°å·è¡¨ç¤ºç®—æ³•çš„æ—¶é—´æ€§èƒ½ï¼›
```

#### çº¿æ€§è¡¨æŸ¥æ‰¾ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```
é¡ºåºæŸ¥æ‰¾(ASL = (N + N-1 + ... + 2 + 1) / N = (N+1) / 2),æ—¶é—´å¤æ‚åº¦ä¸º O(N)

äºŒåˆ†æŸ¥æ‰¾ï¼Œè¿‡ç¨‹å¯çœ‹æˆéå†ä¸€ä¸ªäºŒå‰æ ‘ï¼Œå¹³å‡æŸ¥æ‰¾é•¿åº¦å®é™…å°±æ˜¯äºŒå‰æ ‘é«˜åº¦ O(log2N)

åˆ†å—æŸ¥æ‰¾åˆç§°ç´¢å¼•é¡ºåºæŸ¥æ‰¾ã€‚å®ƒæ˜¯ä¸€ç§æ€§èƒ½ä»‹äºé¡ºåºæŸ¥æ‰¾å’ŒäºŒåˆ†æŸ¥æ‰¾ä¹‹é—´çš„æŸ¥æ‰¾æ–¹æ³•ã€‚
```

#### è¿ªæ°æ–¯ç‰¹æ‹‰å’Œå¼—æ´›ä¼Šå¾·ç®—æ³• [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

##### 1ï¼‰è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•

æ±‚ä»æºç‚¹åˆ°å…¶ä½™å„ç‚¹çš„æœ€çŸ­è·¯å¾„(ã€ è´ªå¿ƒç®—æ³• ã€ä»£è¡¨ï¼Œæƒå€¼ä¸èƒ½å­˜åœ¨è´Ÿå€¼)

##### 2ï¼‰å¼—æ´›ä¼Šå¾·ç®—æ³•

æ±‚æ¯å¯¹é¡¶ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„(ã€ åŠ¨æ€è§„åˆ’ ã€ï¼Œæƒå€¼èƒ½å‡ºç°è´Ÿå€¼)

#### é¼ æ ‡äº‹ä»¶ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

- onmousemove é¼ æ ‡åœ¨å…ƒç´ ä¸Šç§»åŠ¨è§¦å‘äº‹ä»¶,å­å…ƒç´ ä¼šå†’æ³¡ç»™çˆ¶å…ƒç´ 
- onmouseenter é¼ æ ‡åœ¨è¿›å…¥å…ƒç´ æ—¶è§¦å‘äº‹ä»¶ï¼Œä¸å†’æ³¡ï¼›
- onmouseover é¼ æ ‡åœ¨è¿›å…¥å…ƒç´ æ—¶è§¦å‘äº‹ä»¶, å†’æ³¡ã€‚

- onmouseoverã€onmouseoutï¼šé¼ æ ‡ç§»åŠ¨åˆ°è‡ªèº«æ—¶å€™ä¼šè§¦å‘äº‹ä»¶ï¼ŒåŒæ—¶ç§»åŠ¨åˆ°å…¶å­å…ƒç´ èº«ä¸Šä¹Ÿä¼šè§¦å‘äº‹ä»¶
- onmouseenterã€onmouseleaveï¼šé¼ æ ‡ç§»åŠ¨åˆ°è‡ªèº«æ˜¯ä¼šè§¦å‘äº‹ä»¶ï¼Œä½†æ˜¯ç§»åŠ¨åˆ°å…¶å­å…ƒç´ èº«ä¸Šä¸ä¼šè§¦å‘äº‹ä»¶

#### å…­å¤§ç±»æ•°æ®ç±»å‹ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

- undefined
- object
- boolean
- string
- number
- function

åˆ¤æ–­æ–¹å¼å¦‚ä¸‹

> è¦æ˜¯åŸºç¡€ç±»å‹å¯ä»¥ç”¨ `typeOf()`æ¥åˆ¤æ–­;  
> å¼•ç”¨ç±»å‹å¯ä»¥ç”¨ `instanceOf Array`;  
> åŸå‹é“¾æ–¹æ³•`.constructor == Array`;  
> é€šç”¨çš„æ–¹æ³• `Object.prototype.toString.call(æ•°æ®)`;

#### Object.assign() [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

##### 1ï¼‰å®ç°æ‹·è´

ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆæµ…æ‹·è´ï¼‰
JSON è§£æåè§£æ`JSON.parse(JSON.stringify(obj))`ä»¥å®ç°æ·±æ‹·è´
ES6 æ‰©å±•è¿ç®—ç¬¦å®ç°æ•°ç»„çš„æ·±æ‹·è´:

```javascript
var arr = [1, 2, 3, 4, 5];
var [...arr2] = arr;
arr[2] = 5;
console.log(arr);
console.log(arr2);
```

```javascript
// æ‰‹å†™æ·±æ‹·è´
 function deepClone(obj) {
      if (typeof obj !== 'object') return obj;
      if (type window !== 'undefined' && window.JSON) {
        return JSON.parse(JSON.stringify(obj))
      } else {
        let newObj = obj.constructor === Array ? [] : {};
        for (let key in obj) {
          newObj[key] = typeof obj[key] === 'object' ? deepClone(obj[key]) : obj[key];
        }
        return newObj;
      }
    }
```

##### 2ï¼‰åˆå¹¶å¯¹è±¡çš„åŠŸèƒ½

`Object.assign` æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡

```javascript
const target = { a: 1, b: 1 };
const source1 = { b: 2, c: 2 };
const source2 = { c: 3 };

Object.assign(target, source1, source2);
target; // {a:1, b:2, c:3}
```

#### ES6 æ–°ç‰¹æ€§ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

- Default Parametersï¼ˆé»˜è®¤å‚æ•°ï¼‰
- Template Literals ï¼ˆæ¨¡æ¿æ–‡æœ¬ï¼‰
- Multi-line Strings ï¼ˆå¤šè¡Œå­—ç¬¦ä¸²ï¼‰
- Destructuring Assignment ï¼ˆè§£æ„èµ‹å€¼ï¼‰
- Enhanced Object Literals ï¼ˆå¢å¼ºçš„å¯¹è±¡æ–‡æœ¬ï¼‰
- Arrow Functions ï¼ˆç®­å¤´å‡½æ•°ï¼‰
- Promises
- Block-Scoped Constructs Let and Constï¼ˆå—ä½œç”¨åŸŸæ„é€  `Let` and `Const`ï¼‰
- Classesï¼ˆç±»ï¼‰
- Modulesï¼ˆæ¨¡å—ï¼‰

#### axios ç‰¹è‰² [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

- æµè§ˆå™¨ç«¯å‘èµ· `XMLHttpRequests` è¯·æ±‚
- `node` ç«¯å‘èµ· `http` è¯·æ±‚
- æ”¯æŒ `Promise API`
- æ‹¦æˆªè¯·æ±‚å’Œè¿”å›
- è½¬åŒ–è¯·æ±‚å’Œè¿”å›ï¼ˆæ•°æ®ï¼‰
- å–æ¶ˆè¯·æ±‚
- è‡ªåŠ¨è½¬åŒ– `json` æ•°æ®
- å®¢æˆ·ç«¯æ”¯æŒæŠµå¾¡ `XSRF`ï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰

#### Vue ç”Ÿå‘½å‘¨æœŸå’Œé’©å­å‡½æ•° [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

| ç”Ÿå‘½å‘¨æœŸ      | æè¿°                                                                     |
| ------------- | ------------------------------------------------------------------------ |
| beforeCreate  | `$el`å’Œ`data`å¹¶æœªåˆå§‹åŒ– ï¼ˆ`data`ï¼šundefinedï¼Œ`$el`ï¼šundefinedï¼‰          |
| created       | å®Œæˆäº†`data`æ•°æ®çš„åˆå§‹åŒ–ï¼Œel æ²¡æœ‰ï¼ˆ`data`ï¼šXXX å¯è·å–ï¼Œ\$elï¼šundefinedï¼‰ |
| beforeMount   | å®Œæˆäº†`$el`å’Œ`data`çš„åˆå§‹åŒ–ï¼ˆ`data`ï¼šXXX å¯è·å–ï¼Œ`$el`ï¼šXXX è™šæ‹Ÿï¼‰       |
| mounted       | å®ŒæˆæŒ‚è½½ï¼ˆ`data`ï¼šXXX å¯è·å–ï¼Œ`$el`ï¼šXXX çœŸå®ï¼‰                          |
| beforeUpdate  | ç»„ä»¶æ›´æ–°ä¹‹å‰                                                             |
| updated       | ç»„ä»¶æ›´æ–°ä¹‹å                                                             |
| \*activated   | é’ˆå¯¹ `keep-alive`ï¼Œç»„ä»¶è¢«æ¿€æ´»æ—¶è°ƒç”¨                                      |
| \*deactivated | é’ˆå¯¹ `keep-alive`ï¼Œç»„ä»¶è¢«ç§»é™¤æ—¶è°ƒç”¨                                      |
| beforeDestory | ç»„å»ºé”€æ¯å‰è°ƒç”¨                                                           |
| destoryed     | ç»„ä»¶é”€æ¯åè°ƒç”¨                                                           |
| beforecreate  | ä¸¾ä¸ªæ —å­ï¼šå¯ä»¥åœ¨è¿™åŠ ä¸ª loading äº‹ä»¶                                      |
| created       | åœ¨è¿™ç»“æŸ loadingï¼Œè¿˜åšä¸€äº›åˆå§‹åŒ–ï¼Œå®ç°å‡½æ•°è‡ªæ‰§è¡Œ                         |
| mounted       | åœ¨è¿™å‘èµ·åç«¯è¯·æ±‚ï¼Œæ‹¿å›æ•°æ®ï¼Œé…åˆè·¯ç”±é’©å­åšä¸€äº›äº‹æƒ…                       |
| beforeDestory | ä½ ç¡®è®¤åˆ é™¤ XX å—ï¼Ÿ `destoryed` ï¼šå½“å‰ç»„ä»¶å·²è¢«åˆ é™¤ï¼Œæ¸…ç©ºç›¸å…³å†…å®¹          |

#### addEventListener ç›‘å¬å‡½æ•° [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
var btnAdd = document.getElementById("btnAdd");

// ç¬¬ä¸‰ä¸ªå‚æ•°é»˜è®¤ä¸ºfalse,è¡¨ç¤ºå†’æ³¡æ¨¡å‹å³æ˜¯å¤šä¸ªè§¦å‘äº‹ä»¶çš„æ—¶å€™æ‰§è¡Œé¡ºåºæ˜¯ä»é‡Œå±‚å¼€å§‹æ‰§è¡Œåˆ°å¤–å±‚;trueï¼Œè¡¨ç¤ºæ•æŠ“æ¨¡å‹
btnAdd.addEventListener(
  "click",
  function() {
    // ...
  },
  false
);
```

#### å¾ªç¯ä¸­åˆ›å»ºé—­åŒ…ï¼šä¸€ä¸ªå¸¸è§çš„é”™è¯¯ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
for (var i = 0; i <= oBtn.length; i++) {
  oBtn[i].onclick = function() {
    console.log(i);
  };
}
// ä¼šä½¿æ¡ç›®ä¸€ç›´æŒ‡å‘æœ€åä¸€ä½(æ‹†åˆ†ä½œç”¨åŸŸå¯ä»¥çœ‹çš„æ›´æ¸…æ¥š)
```

##### åŒ¿åå‡½æ•°(var fun = function(){...})

> åŒ¿åå‡½æ•°ä¸»è¦æœ‰ä¸¤ç§å¸¸ç”¨çš„åœºæ™¯ï¼Œä¸€æ˜¯å›è°ƒå‡½æ•°ï¼ŒäºŒæ˜¯ç›´æ¥æ‰§è¡Œå‡½æ•°ã€‚  
> åŒ¿åå‡½æ•°ç›´æ¥æ‰§è¡Œå‡½æ•°çš„åŸºæœ¬å½¢å¼ä¸º`(function(){...})()`ã€‚
> å‰é¢çš„æ‹¬å·åŒ…å«å‡½æ•°ä½“ï¼Œåé¢çš„æ‹¬å·å°±æ˜¯ç»™åŒ¿åå‡½æ•°ä¼ é€’å‚æ•°å¹¶ç«‹å³æ‰§è¡Œä¹‹ã€‚  
> åŒ¿åå‡½æ•°çš„ä½œç”¨æ˜¯å¸¸ç”¨æ¥åŒ…å«ä»£ç ä»¥ä¸æ±¡æŸ“å…¨å±€å‘½åç©ºé—´è¿è¡Œåé”€æ¯ç¯å¢ƒï¼Œæˆ–è€…ç”¨åšé—­åŒ…ã€‚

##### è§£å†³åŠæ³•ï¼š

1. ä½¿ç”¨åŒ¿åå‡½æ•°

```javascript

   for(var i=0;i<=oBtn.length;i++){
   (function(i){
   oBtn[i].onclick=function(){
   console.log(i);
   }
   )(i)
   }
```

2. let å—çŠ¶ä½œç”¨åŸŸ

```javascript
for (let i = 0; i <= oBtn.length; i++) {
  oBtn[i].onclick = function() {
    console.log(i);
  };
}
```

3. ä½¿ç”¨ foreach è¿­ä»£æ•°ç»„

#### æ—¶é—´æˆ³ getTime() [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

è¿”å›çš„å°±æ˜¯æ ¼æ—å¨æ²»æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥ 0 ç‚¹ 0 åˆ† 0 ç§’ 0 æ¯«ç§’åˆ°ç°åœ¨çš„æ¯«ç§’æ•°

#### æˆªå–å­—ç¬¦ä¸² slice/splice/substr/substring(n,m) [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
/**
 * sliceå’Œsubstringæ¥æ”¶çš„æ˜¯èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®(ä¸åŒ…æ‹¬ç»“æŸä½ç½®),è€Œsubstræ¥æ”¶çš„åˆ™æ˜¯èµ·å§‹ä½ç½®å’Œæ‰€è¦è¿”å›çš„å­—ç¬¦ä¸²é•¿åº¦
 * substringæ˜¯ä»¥ä¸¤ä¸ªå‚æ•°ä¸­è¾ƒå°ä¸€ä¸ªä½œä¸ºèµ·å§‹ä½ç½®ï¼Œè¾ƒå¤§çš„å‚æ•°ä½œä¸ºç»“æŸä½ç½®ã€‚
 * sliceå¯ä»¥å¯¹æ•°ç»„æ“ä½œï¼Œsubstringä¸è¡Œ
 * spliceæ–¹æ³•ä»arrayä¸­ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæ•°ç»„ï¼Œå¹¶ç”¨æ–°çš„itemæ›¿æ¢å®ƒä»¬ã€‚å‚æ•°næ˜¯ä»æ•°ç»„arrayä¸­ç§»é™¤å…ƒç´ çš„å¼€å§‹ä½ç½®ã€‚å‚æ•°mæ˜¯è¦ç§»é™¤çš„å…ƒç´ çš„ä¸ªæ•°ã€‚
 */
var a = ["a", "b", "c", "d"];
var b = a.slice(1, 3); // b=['b','c'],a=['a','b','c','d'];
var b = a.splice(1, 3, "e", "f"); // a=['a','e','f'],b=['b','c','d']
var b = a.substr(1, 3); // error if a='abcd',b='bcd',a='abcd'
var b = a.substring(1, 3); // error if a='abcd',b='bc',a='abcd'
// toUpperCase() è½¬æ¢ä¸ºå¤§å†™
// toLowerCase() è½¬æ¢ä¸ºå°å†™
// split() è®²å­—ç¬¦ä¸²åˆ‡å‰²æˆæ•°ç»„
```

#### JS è®¾ç½® cookie [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
/**
 * ä¿å­˜cookieså‡½æ•°
 * @param {*} name
 * @param {*} value
 */
function SetCookie(name, value) {
  var Days = 30 * 12; // cookie å°†è¢«ä¿å­˜ä¸€å¹´
  var exp = new Date(); // è·å¾—å½“å‰æ—¶é—´
  exp.setTime(exp.getTime() + Days * 24 * 60 * 60 * 1000); // æ¢æˆæ¯«ç§’
  document.cookie = name + "=" + escape(value) + ";expires=" + exp.toGMTString();
}
/**
 * è·å–cookieså‡½æ•°
 * @param {*} name
 */
function getCookie(name) {
  var arr = document.cookie.match(new RegExp("(^| )" + name + "=([^;]*)(;|$)"));
  if (arr != null) {
    return unescape(arr[2]);
  } else {
    return null;
  }
}
/**
 * åˆ é™¤cookieså‡½æ•°
 * @param {*} name
 */
function delCookie(name) {
  var exp = new Date(); //å½“å‰æ—¶é—´
  exp.setTime(exp.getTime() - 1);
  var cval = getCookie(name);
  if (cval != null) document.cookie = name + "=" + cval + ";expires=" + exp.toGMTString();
}
```

#### ç®€è¿°é¢å‘å¯¹è±¡ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

> ä¸‡ç‰©çš†å¯¹è±¡ï¼ŒæŠŠä¸€ä¸ªå¯¹è±¡æŠ½è±¡æˆç±»,å…·ä½“ä¸Šå°±æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡çš„é™æ€ç‰¹å¾å’ŒåŠ¨æ€ç‰¹å¾æŠ½è±¡æˆå±æ€§å’Œæ–¹æ³•,ä¹Ÿå°±æ˜¯æŠŠä¸€ç±»äº‹ç‰©çš„ç®—æ³•å’Œæ•°æ®ç»“æ„å°è£…åœ¨ä¸€ä¸ªç±»ä¹‹ä¸­,ç¨‹åºå°±æ˜¯å¤šä¸ªå¯¹è±¡å’Œäº’ç›¸ä¹‹é—´çš„é€šä¿¡ç»„æˆçš„. é¢å‘å¯¹è±¡å…·æœ‰å°è£…æ€§,ç»§æ‰¿æ€§,å¤šæ€æ€§ã€‚  
>  **ã€ å°è£… ã€**:éšè”½äº†å¯¹è±¡å†…éƒ¨ä¸éœ€è¦æš´éœ²çš„ç»†èŠ‚,ä½¿å¾—å†…éƒ¨ç»†èŠ‚çš„å˜åŠ¨è·Ÿå¤–ç•Œè„±ç¦»,åªä¾é æ¥å£è¿›è¡Œé€šä¿¡.å°è£…æ€§é™ä½äº†ç¼–ç¨‹çš„å¤æ‚æ€§ã€‚  
> é€šè¿‡ **ã€ ç»§æ‰¿ ã€**,ä½¿å¾—æ–°å»ºä¸€ä¸ªç±»å˜å¾—å®¹æ˜“,ä¸€ä¸ªç±»ä»æ´¾ç”Ÿç±»é‚£é‡Œè·å¾—å…¶éç§æœ‰çš„æ–¹æ³•å’Œå…¬ç”¨å±æ€§çš„ç¹çå·¥ä½œäº¤ç»™äº†ç¼–è¯‘å™¨ã€‚  
> è€Œç»§æ‰¿å’Œå®ç°æ¥å£å’Œè¿è¡Œæ—¶çš„ç±»å‹ç»‘å®šæœºåˆ¶ æ‰€äº§ç”Ÿçš„ **ã€ å¤šæ€ ã€**,ä½¿å¾—ä¸åŒçš„ç±»æ‰€äº§ç”Ÿçš„å¯¹è±¡èƒ½å¤Ÿå¯¹ç›¸åŒçš„æ¶ˆæ¯ä½œå‡ºä¸åŒçš„ååº”,æå¤§åœ°æé«˜äº†ä»£ç çš„é€šç”¨æ€§. æ€»ä¹‹,é¢å‘å¯¹è±¡çš„ç‰¹æ€§æé«˜äº†å¤§å‹ç¨‹åºçš„é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

#### Number/JSON [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
Infinity; // æ— ç©·æ•° ä¸€èˆ¬ç”¨æ¥æè¿°åŠ¨ç”»çš„é‡å¤æ¬¡æ•°; Nç»´æ•°ç»„çš„æ— é™é™ç»´ arr.flat(Infinity)
Number.isFinite(obj); // isFinite()æ£€æµ‹ä¼ å…¥çš„å‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰ç©·æ•°
Number.isNaN(obj); // isNaN()å‡½æ•°ç”¨äºæ£€æŸ¥å…¶å‚æ•°æ˜¯å¦æ˜¯éæ•°å­—å€¼ã€‚
JSON.parse(); // ç”¨äºå°†ä¸€ä¸ª JSON å­—ç¬¦ä¸²è½¬æ¢ä¸º JavaScript å¯¹è±¡ã€‚
JSON.stringify(); // ç”¨äºå°† JavaScript å€¼è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ã€‚
```

#### attachEvent å’Œ addEventListener [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

##### ç›¸åŒç‚¹

> dom å¯¹è±¡çš„æ–¹æ³•ï¼Œå¯ä»¥å®ç°ä¸€ç§äº‹ä»¶ç»‘å®šå¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ã€‚

```javascript
obj = document.getElementById("testdiv");
// ç‚¹å‡»æ—¶ï¼Œä¸‰ä¸ªæ–¹æ³•éƒ½ä¼šæ‰§è¡Œ
obj.attachEvent('onclick',function(){{console.log('1');});
obj.attachEvent('onclick',function(){{console.log('2');});
obj.attachEvent('onclick',function(){{console.log('3');});
obj = document.getElementById("testdiv");
// ç‚¹å‡»æ—¶ï¼Œä¸‰ä¸ªæ–¹æ³•éƒ½ä¼šæ‰§è¡Œ
obj.addEventListener('click',function(){{console.log('1');},false);
obj.addEventListener('click',function(){{console.log('2');},false);
obj.addEventListener('click',function(){{console.log('3');},false);
```

##### ä¸åŒç‚¹

> æ‰§è¡Œé¡ºåºä¸åŒ

```javascript
// attachEvent
console.log("3");
console.log("2");
console.log("1");

// addEventListener
console.log("1");
console.log("2");
console.log("3");
```

1. `attachEvent` æ˜¯ IE æœ‰çš„æ–¹æ³•ï¼Œå®ƒä¸éµå¾ª W3C æ ‡å‡†ï¼Œè€Œå…¶ä»–çš„ä¸»æµæµè§ˆå™¨å¦‚ FF ç­‰éµå¾ª W3C æ ‡å‡†çš„æµè§ˆå™¨éƒ½ä½¿ç”¨ `addEventListener`ï¼Œæ‰€ä»¥å®é™…å¼€å‘ä¸­éœ€åˆ†å¼€å¤„ç†ã€‚
2. å¤šæ¬¡ç»‘å®šåæ‰§è¡Œçš„é¡ºåºæ˜¯ä¸ä¸€æ ·çš„ï¼Œ`attachEvent` æ˜¯åç»‘å®šå…ˆæ‰§è¡Œï¼ŒaddEventListener æ˜¯å…ˆç»‘å®šå…ˆæ‰§è¡Œã€‚
3. ç»‘å®šæ—¶é—´æ—¶ï¼Œ`attachEvent` å¿…é¡»å¸¦ `on`ï¼Œå¦‚ `onclick`ï¼Œ`onmouseover` ç­‰ï¼Œè€Œ `addEventListener` ä¸èƒ½å¸¦ `on`ï¼Œå¦‚ `click`ï¼Œ`mouseover`ã€‚è¿™ä¸ªåŒºåˆ«åœ¨ä»¥ä¸Šä»£ç ä¸­å¯è§ã€‚
4. `attachEvent` ä»…éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œè€Œ `addEventListener` éœ€è¦ä¼ é€’ä¸‰ä¸ªå‚æ•°ï¼Œè¿™é‡Œç‰µæ‰¯åˆ°ã€ äº‹ä»¶æµ ã€çš„æ¦‚å¿µã€‚

#### Spread Operator å±•å¼€è¿ç®—ç¬¦ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

Spread Operator å³ 3 ä¸ªç‚¹ ...ï¼Œæœ‰å‡ ç§ä¸åŒçš„ä½¿ç”¨æ–¹æ³•ã€‚

- å¯ç”¨äºç»„è£…æ•°ç»„

```javascript
const todos = ["Learn dvaA", "Learn dvaB"];

// ['Learn dvaA','Learn dvaB' 'Learn antd']
console.log([...todos, "Learn antd"]);
```

- ä¹Ÿå¯ç”¨äºè·å–æ•°ç»„çš„éƒ¨åˆ†é¡¹ã€‚

```javascript
const arr = ["a", "b", "c"];

const [first, ...rest] = arr;
console.log(rest); // ['b', 'c']

const [first, , ...rest] = arr;
console.log(rest); // ['c']
```

- è¿˜å¯ä»¥æ”¶é›†å‡½æ•°å‚æ•°è½¬æ¢æˆæ•°ç»„

```javascript
function directions(first, ...rest) {
  console.log(rest);
}
directions("a", "b", "c"); // ['b', 'c'];
```

- ä»£æ›¿ apply

```javascript
function foo(x, y, z) {}
const args = [1, 2, 3];

// ä¸‹é¢ä¸¤å¥æ•ˆæœç›¸åŒ
foo.apply(null, args);
foo(...args);
```

- å¯¹åº”å¯¹è±¡è€Œè¨€ï¼Œç»„åˆæˆæ–°çš„å¯¹è±¡

```javascript
const foo = {
  a: 1,
  b: 2
};
const bar = {
  b: 3,
  c: 2
};
const d = 4;
const ret = { ...foo, ...bar, d }; // { a:1, b:3, c:2, d:4 }
```

#### JS éƒ¨åˆ†ç®€å†™ :checkered_flag: é€¼æ ¼æ‹”é«˜ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
// å–æ•´
parseInt(a, 10); // Before
Math.floor(a); // Before
a >> 0; // Before
~~a; // After
a | 0; // After
// --------------------------
//å››èˆäº”å…¥
Math.round(a); // Before
(a + 0.5) | 0; // After
// --------------------------
// å†…ç½®å€¼
undefined; // Before
void 0; // After, å¿«
(0)[0]; // After, ç•¥æ…¢
// --------------------------
// å†…ç½®å€¼
Infinity;
1 / 0;
// --------------------------
//å¸ƒå°”å€¼çŸ­å†™æ³•
true; // Before
!0; // After
//å¸ƒå°”å€¼çŸ­å†™æ³•
false; // Before
!1; // After
```

#### å…³äº Ref [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

##### Vue

    åªè¦æƒ³è¦åœ¨ Vue ä¸­ç›´æ¥æ“ä½œ DOM å…ƒç´ ï¼Œå°±å¿…é¡»ç”¨ ref å±æ€§è¿›è¡Œæ³¨å†Œ.å…ˆåœ¨ DOM ä¸­ä½¿ç”¨ ref æ ‡ç­¾è¿›è¡Œäº†æ³¨å†Œï¼Œç„¶åä¾¿å¯ä»¥é€šè¿‡ this.$refs å†è·Ÿæ³¨å†Œæ—¶çš„åç§°æ¥å¼•ç”¨ DOM å…ƒç´ äº†

##### React

    ref ç”¨åœ¨å¤„ç†è¡¨å•ç©ºé—´èšç„¦ï¼Œæ–‡æœ¬é€‰æ‹©ï¼Œåª’ä½“æ’­æ”¾ä»¥åŠè§¦å‘åŠ¨ç”»æ•ˆæœç­‰ç­‰. ref æ˜¯ä¸€ä¸ª React çš„éå¸¸ç‰¹æ®Šçš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¸€å®šæ˜¯æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šåœ¨ç»„ä»¶æ¸²æŸ“æ—¶è¿›è¡Œæ‰§è¡Œä¸€éï¼Œåœ¨ä»è§†å›¾ä¸­æ’¤å‡ºæ¥æ—¶ä¼šæ‰§è¡Œä¸€é

#### å…³äº Set å’Œ Map [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

##### Set

`ES6`æ–°çš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼æ•°ç»„ä½†æ˜¯å†…å®¹å”¯ä¸€

```javascript
var set = new Set([1, 2, 3, 4, 4]);

[...set]; // [1, 2, 3, 4]
```

æœ‰å››ä¸ªæ“ä½œæ–¹æ³•ï¼š

- add(value)ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº«ã€‚
- delete(value)ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸã€‚
- has(value)ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸º Set çš„æˆå‘˜ã€‚
- clear()ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼

```javascript
// å¯ä»¥ç»“åˆ Array.from æ·±æ‹·è´æ•°ç»„
var newArr = Array.from(new Set(arr));
var obj = { name: "test", age: 19, brother: ["jane", "john", "Mary"] };

// Array.from()æ–¹æ³•å¯ä»¥å°†ç±»æ•°ç»„å¯¹è±¡å’Œå¯éå†å¯¹è±¡(key ä¸ºå­—ç¬¦ä¸²)è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„
Array.from(obj); // ['test',19,['jane','john','Mary']]

// Object.keys()å¯ä»¥å–å¾—æ•°ç»„å¯¹è±¡çš„ key é›†åˆ
Object.keys(obj); // ['name','age','brother']
```

##### Map

Map ç»“æ„æä¾›äº†`å€¼--å€¼`çš„å¯¹åº”ï¼Œæ˜¯ä¸€ç§æ›´å®Œå–„çš„`hash`ç»“æ„çš„å®ç°ã€‚ç±»ä¼¼`Object`,ä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯ã€ é”® ã€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥æˆä¸ºã€ é”® ã€

```javascript
var m = new Map();
var o = { p: "Hello World" };
m.set(o, "content");
m.get(o); // "content"
m.has(o); // true
m.delete(o); // true
m.has(o); // false

// åªæœ‰å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ŒMapç»“æ„æ‰å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚è¿™ä¸€ç‚¹è¦éå¸¸å°å¿ƒ
m.set(["a"], 233);
m.get(["a"]); // undefinedã€‚è¡¨é¢é”®ç›¸åŒä½†æ˜¯å†…å­˜åœ°å€ä¸ä¸€æ ·
```

> å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼š**size**ã€**set**ã€**get**ã€**has**ã€**delete**ã€**clear**  
> éå†æ–¹æ³•ï¼š`keys()`ã€`values()`ã€`entries()`ã€`forEach()`

#### åŒæºç­–ç•¥[:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```
æºï¼ˆoriginï¼‰å°±æ˜¯åè®®ã€åŸŸåå’Œç«¯å£å·ã€‚
ç»•è¿‡åŒæºç­–ç•¥:
  ä»£ç†ã€
  Cors(è·¨åŸŸèµ„æºå…±äº«):
    æµè§ˆå™¨å‘é€è·¨åŸŸè¯·æ±‚æ—¶ï¼Œè®¾ç½®Http Request Header Origin = Current URI
    æœåŠ¡å™¨è‹¥ä¸æ¥å—è¯¥ç½‘ç«™çš„è·¨åŸŸè¯·æ±‚ï¼Œåˆ™è¿”å›é”™è¯¯
    æœåŠ¡å™¨è‹¥æ¥å—å…¶è·¨åŸŸè¯·æ±‚ï¼Œåˆ™åœ¨Response Headerä¸­è®¾ç½®Access-Control-Allow-Originå±æ€§
    æµè§ˆå™¨çœ‹åˆ°Access-Control-Allow-Originå±æ€§ï¼ŒåŒæ„è§£æè¿”è¿˜ç»“æœã€‚
  Jsonp:
    HTMLä¸­çš„scriptæ ‡ç­¾å¯ä»¥åŠ è½½å¹¶æ‰§è¡Œå…¶ä»–åŸŸçš„javascriptï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡scriptæ ‡è®°æ¥åŠ¨æ€åŠ è½½å…¶ä»–åŸŸçš„èµ„æº
```

#### Css ä¸­ white-spaceã€word-breakã€word-wrap [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

- white-space: ç”¨æ¥æ§åˆ¶ç©ºç™½ç¬¦çš„æ˜¾ç¤ºï¼ŒåŒæ—¶æ§åˆ¶æ˜¯å¦è‡ªåŠ¨æ¢è¡Œã€‚å¸¸ç”¨`normal`(æ­£å¸¸æ¢è¡Œ)ã€`nowrap`(ä¸æ¢è¡Œ)
- word-break: æ§åˆ¶å•çº¯å¦‚ä½•è¢«æ‹†åˆ†æ¢è¡Œã€‚`normal`ã€`break-all`ã€`keep-all`
- word-wrap(overflow-wrap)ï¼šæ§åˆ¶é•¿åº¦è¶…è¿‡ä¸€è¡Œçš„å•çº¯æ˜¯å¦è¢«æ‹†åˆ†æ¢è¡Œï¼Œæ˜¯ word-break çš„ä¸€ä¸ªè¡¥å……ã€‚`normal`ã€`break-word`
  > é…åˆ`text-overflowï¼šellipsis`å®ç°[æ–‡æœ¬æº¢å‡º](#å•è¡Œæ–‡æœ¬æº¢å‡º)

#### CSS3 åŠ¨ç”» [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```css
.animation {
  position: absolute;
  animation: move 1.2s ease-in 80ms infinite alternate;
}
/* å…¶ä¸­å±æ€§
  animation-name: move; // åŠ¨ç”»åç§°
  animation-duration: 5s; // å®Œæˆä¸€å‘¨æœŸéœ€è¦æ—¶é—´
  animation-timing-function: linear; // é€Ÿåº¦æ›²çº¿
  animation-delay: 2s; // å¼€å§‹åŠ¨ç”»å»¶è¿Ÿ
  animation-iteration-count: infinite; // æ’­æ”¾æ¬¡æ•°
  animation-direction: alternate; // ä¸‹ä¸€å‘¨æ’­æ”¾é¡ºåº
 */
@keyframes move {
  0% {
  }
  50% {
  }
  100% {
  }
}
```

#### CSS æ€ä¹ˆå®ç°å•ã€å¤šè¡Œæ–‡æœ¬æº¢å‡º [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

##### å•è¡Œæ–‡æœ¬æº¢å‡º

```css
.ellipsis {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
```

##### å¤šè¡Œæ–‡æœ¬æº¢å‡ºï¼š

```css
.ellipsis {
  display: -webkit-box;
  -webkit-line-clamp: 3; /* è¡Œæ•° */
  -webkit-box-orient: vitical; /* æ°´å¹³æ’åˆ—æ–¹å¼ */
  text-overflow: ellipsis;
}
```

#### BFC å¸ƒå±€ ï¼ˆå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

##### åº”ç”¨

- è§£å†³ `margin-top` å’Œ `margin-bottom` å åŠ 
- ç”¨äºå¸ƒå±€ï¼ˆæ¯”å¦‚ä¸¤æ å¸ƒå±€ï¼‰
- ç”¨äºæ¸…é™¤æµ®åŠ¨
- è®¡ç®— BFC é«˜åº¦

##### è§¦å‘ BFC

- è®¾ç½®é™¤ `float:none` ä»¥å¤–çš„å±æ€§å€¼ï¼ˆå¦‚ï¼šleft | rightï¼‰å°±ä¼šè§¦å‘ BFC
- è®¾ç½®é™¤ `overflow: visible` ä»¥å¤–çš„å±æ€§å€¼ï¼ˆå¦‚ï¼š hidden | auto | scrollï¼‰å°±ä¼šè§¦å‘ BFC
- è®¾ç½® `display` ä¸ºè¡¨æ ¼å¸ƒå±€æˆ–è€…å¼¹æ€§å¸ƒå±€: inline-block | flex | inline-flex | table-cell | table-caption å°±ä¼šè§¦å‘ BF ï¼£
- è®¾ç½® `position` ä¸ºç»å¯¹å®šä½ï¼šabsolute | fixed å°±ä¼šè§¦å‘ BFC
- ä½¿ç”¨ `fieldset` å…ƒç´ ï¼ˆå¯ä»¥ç»™è¡¨å•å…ƒç´ è®¾ç½®ç¯ç»•è¾¹æ¡†çš„ html å…ƒç´ ï¼‰ä¹Ÿä¼šè§¦å‘ BFC

#### CSS å®ç°ä¸‰è§’å½¢ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```css
.triangle {
  width: 0px;
  height: 0px;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 10px solid blue;
}
```

#### CSS å‚ç›´æ°´å¹³å±…ä¸­ [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

```css
plan-a. {
  position: absolute;
  margin: auto;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
plan-b. {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  transform: translate(-50%, -50%);
  text-align: center;
}
plan-c. {
  display: flex;
  justify-content: center;
  align-items: center;
}
```

#### æµè§ˆå™¨æ¸²æŸ“åŸç† [:cyclone:](#ä¸»è¦å†…å®¹åŒ…å«)

1. DOM Treeï¼šæµè§ˆå™¨å°† `HTML` è§£ææˆæ ‘å½¢çš„æ•°æ®ç»“æ„ã€‚
2. CSS Rule Treeï¼šæµè§ˆå™¨å°† `CSS` è§£ææˆæ ‘å½¢çš„æ•°æ®ç»“æ„ã€‚
3. Render Tree: `DOM` å’Œ `CSSOM` åˆå¹¶åç”Ÿæˆ `Render Tree`ã€‚
4. layoutï¼šæœ‰äº† `Render Tree`ï¼Œæµè§ˆå™¨å·²ç»èƒ½çŸ¥é“ç½‘é¡µä¸­æœ‰å“ªäº›èŠ‚ç‚¹ã€å„ä¸ªèŠ‚ç‚¹çš„ `CSS` å®šä¹‰ä»¥åŠä»–ä»¬çš„ä»å±å…³ç³»ï¼Œä»è€Œå»è®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸­çš„ä½ç½®ã€‚
5. painting: æŒ‰ç…§ç®—å‡ºæ¥çš„è§„åˆ™ï¼Œé€šè¿‡æ˜¾å¡ï¼ŒæŠŠå†…å®¹ç”»åˆ°å±å¹•ä¸Šã€‚

##### å›æµ é‡ç»˜

- reflowï¼ˆå›æµï¼‰ï¼šå½“æµè§ˆå™¨å‘ç°æŸä¸ªéƒ¨åˆ†å‘ç”Ÿäº†ç‚¹å˜åŒ–å½±å“äº†å¸ƒå±€ï¼Œéœ€è¦å€’å›å»é‡æ–°æ¸²æŸ“
- repaintï¼ˆé‡ç»˜ï¼‰ï¼šæ”¹å˜æŸä¸ªå…ƒç´ çš„èƒŒæ™¯è‰²ã€æ–‡å­—é¢œè‰²ã€è¾¹æ¡†é¢œè‰²ç­‰ç­‰ä¸å½±å“å®ƒå‘¨å›´æˆ–å†…éƒ¨å¸ƒå±€æ—¶ï¼Œå±å¹•éœ€è¦ä¸€éƒ¨åˆ†é‡ç”»ï¼Œä½†æ˜¯å…ƒç´ å°ºå¯¸æ²¡æœ‰æ”¹å˜

### å‰ç«¯æ”€é˜¶

#### å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æœ‰ç¯ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
function cycleDetector(obj) {
  // è¯·æ·»åŠ ä»£ç 
  let result = true;
  try {
    JSON.stringify(obj);
  } catch (e) {
    result = false;
  } finally {
    return result;
  }
}
```

#### ES6 æ•°ç»„æ–°ç‰¹æ€§ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
/**
 * Array.forEach() // forEachéå†æ•°ç»„ï¼Œæ— è¿”å›å€¼ï¼Œä¸æ”¹å˜åŸæ•°ç»„ï¼Œä»…ä»…åªæ˜¯éå†ã€å¸¸ç”¨äºæ³¨å†Œç»„ä»¶ã€æŒ‡ä»¤ç­‰ç­‰ã€‚
 * Array.map() //ã€æ˜ å°„ã€‘ mapéå†æ•°ç»„ï¼Œå’ŒforEachç”¨æ³•ç›¸ä¼¼ï¼Œä½†æ˜¯ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œmapä¸ä¼šæ”¹å˜åŸæ•°ç»„çš„å€¼ã€‚
 * Array.filter() //ã€ç­›é€‰ã€‘ filterè¿‡æ»¤æ‰æ•°ç»„ä¸­ä¸æ»¡è¶³æ¡ä»¶çš„å€¼ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¸æ”¹å˜åŸæ•°ç»„çš„å€¼ã€‚
 * Array.some() //ã€æˆ–ã€‘ éå†æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶åˆ™è¿”å›trueï¼Œåœæ­¢éå†ï¼Œç»“æœè¿”å›trueã€‚ä¸æ”¹å˜æ•°ç»„ã€‚
 * Array.every() //ã€ä¸”ã€‘ éå†æ•°ç»„æ¯ä¸€é¡¹ï¼Œæ¯ä¸€é¡¹è¿”å›true,åˆ™æœ€ç»ˆç»“æœä¸ºtrueã€‚å½“ä»»ä½•ä¸€é¡¹è¿”å›falseæ—¶ï¼Œåœæ­¢éå†ï¼Œè¿”å›falseã€‚ä¸æ”¹å˜åŸæ•°ç»„
 * Array.reduce() //ã€ä»å·¦åˆ°å³ç´¯åŠ ã€‘ Reduceè®©æ•°ç»„çš„å‰åä¸¤é¡¹è¿›è¡ŒæŸç§è®¡ç®—ã€‚ç„¶åè¿”å›å…¶å€¼ï¼Œå¹¶ç»§ç»­è®¡ç®—ã€‚ä¸æ”¹å˜åŸæ•°ç»„ï¼Œè¿”å›è®¡ç®—çš„æœ€ç»ˆç»“æœï¼Œä»æ•°ç»„çš„ç¬¬äºŒé¡¹å¼€å§‹éå†ã€‚
 * Array.reduceRight() //ã€ä»å³åˆ°å·¦ç´¯åŠ ã€‘
 */

//array.reduce(callbackfn[, initialValue]) // initialValueé€‰å¡«ï¼Œç”¨ä½œåˆå§‹å€¼æ¥å¯åŠ¨ç´¯ç§¯ã€‚array å’Œ callbackfnå¿…å¡« ï¼ˆæ•°ç»„å¯¹è±¡ï¼Œéå†å…ƒç´ ã€‚éå†å…ƒç´ å¯ä»¥æ¥å—æœ€å¤šå››ä¸ªå‚æ•°ã€result,item,index,arr ã€‘ï¼‰
var arr = [1, 2, 3, 4];
arr.reduce((result, item, index, arr) => {
  console.log(result); // 1  3  6  resultä¸ºä¸Šæ¬¡ä¸€è®¡ç®—çš„ç»“æœ
  console.log(item); // 2  3  4
  console.log(index); // 1  2  3
  return result + item; // æœ€ç»ˆç»“æœä¸º10
});
```

#### React çš„ JSX [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

> JSX å…è®¸æˆ‘ä»¬åœ¨ Javascript ä¸­å†™ HTMLï¼Œè€Œä¸æ˜¯ç”¨ HTML åŒ…å« Javascriptã€‚å®ƒèƒ½å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå¼€å‘ï¼Œå› ä¸ºæˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒå­—ç¬¦ä¸²å’Œæ¢è¡Œç­‰ã€‚JSX æ¯ä¸€ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ª `render` æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•äº§ç”Ÿä¸€ä¸ª`ViewModel è§†å›¾æ¨¡å‹`â€“åœ¨è¿”å› HTML åˆ°ç»„ä»¶ä¹‹å‰ï¼Œä½ å¯ä»¥å°†è¿™ä¸ªæ¨¡å‹çš„ä¿¡æ¯æ”¾å…¥è§†å›¾ä¸­ï¼Œæ„å‘³ç€ä½ çš„ HTML ä¼šæ ¹æ®è¿™ä¸ªæ¨¡å‹åŠ¨æ€æ”¹å˜(ä¾‹å¦‚ä¸€ä¸ªåŠ¨æ€åˆ—è¡¨)ã€‚ä¸€æ—¦ä½ å®Œæˆäº†æ“ä½œï¼Œå°±å¯ä»¥è¿”å›ä½ æƒ³æ¸²æŸ“(`render`)çš„ä¸œè¥¿

#### JSX çš„æ³¨æ„ç‚¹ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

1. å¦‚æœåœ¨ JSX ä¸­ç»™å…ƒç´ æ·»åŠ ç±», éœ€è¦ä½¿ç”¨ `className` ä»£æ›¿ `class`
   ç±»ä¼¼ï¼šlabel çš„ `for` å±æ€§ï¼Œä½¿ç”¨ `htmlFor` ä»£æ›¿
2. åœ¨ JSX ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ JS ä»£ç ï¼Œç›´æ¥åœ¨ JSX ä¸­é€šè¿‡ `{}` ä¸­é—´å†™ JS ä»£ç å³å¯
3. åœ¨ JSX ä¸­åªèƒ½ä½¿ç”¨è¡¨è¾¾å¼ï¼Œä½†æ˜¯ **ä¸èƒ½å‡ºç°è¯­å¥**ï¼ï¼ï¼
4. åœ¨ JSX ä¸­æ³¨é‡Šè¯­æ³•ï¼š{/_ ä¸­é—´æ˜¯æ³¨é‡Šçš„å†…å®¹ _/}

#### React ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

##### è£…è½½è¿‡ç¨‹

ä¾æ¬¡è°ƒç”¨å¦‚ä¸‹è¿‡ç¨‹ `constructor` ã€ `getInitialState` ã€ `getDefaultProps` ã€ `componentWillMont` ã€ `render` ã€ `componentDIdMount`

1. constructor

> å°±æ˜¯ `ES6` é‡Œçš„æ„é€ å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªç»„ä»¶ç±»çš„å®ä¾‹ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­æˆ‘ä»¬è¦è¿›è¡Œä¸¤æ­¥æ“ä½œï¼šåˆå§‹åŒ– stateï¼Œç»‘å®šæˆå‘˜å‡½æ•°çš„ this ç¯å¢ƒ

2. getInitialState å’Œ getDefaultProps

> è¿™ä¸ªä¸¤ä¸ªè¿‡ç¨‹å¯ä»¥ä¸å»æ·±ç©¶ï¼Œåªä¼šåœ¨ç”¨åˆ° React.createClass æ–¹æ³•åˆ›é€ çš„ç»„ä»¶ç±»æ‰ä¼šå‘ç”Ÿä½œç”¨ï¼Œæ‰€ä»¥åœ¨ `ES6` çš„æ–¹æ³•å®šä¹‰çš„ React ç»„ä»¶ä¸­æ ¹æœ¬ä¸ä¼šç”¨åˆ°

3. render

> ä¸å¤¸å¼ çš„è¯´ `render` æ˜¯ React ç»„ä»¶ä¸­æœ€ä¸ºé‡è¦çš„ä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ª React ä¸­å”¯ä¸€ä¸å¯å¿½ç•¥çš„å‡½æ•°ï¼Œåœ¨ `render` å‡½æ•°ä¸­ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçˆ¶å…ƒç´ ã€‚

> å…¶ä¸­éœ€è¦æ·±å…¥åˆ†æçš„æ˜¯ï¼š`render` å‡½æ•°æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä»–å¹¶ä¸è¿›è¡Œå®é™…ä¸Šçš„æ¸²æŸ“åŠ¨ä½œï¼Œä»–åªæ˜¯ä¸€ä¸ª JSX æè¿°çš„ç»“æ„ï¼Œæœ€ç»ˆæ˜¯ç”± React æ¥è¿›è¡Œæ¸²æŸ“è¿‡ç¨‹ï¼Œ`render` å‡½æ•°ä¸­ä¸åº”è¯¥æœ‰ä»»ä½•æ“ä½œï¼Œå¯¹é¡µé¢çš„æè¿°å®Œå…¨å–å†³äº `this.state` å’Œ `this.props` çš„è¿”å›ç»“æœï¼Œä¸èƒ½åœ¨ `render` è°ƒç”¨ `this.setState`

æœ‰ä¸€ä¸ªå…¬å¼æ€»ç»“çš„éå¸¸å½¢è±¡ `UI = render(data)`

4. componenWillMonunt å’Œ componentDidMount

> è¿™ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«åœ¨ `render` å‰åæ‰§è¡Œï¼Œ`componentWillMonut` æ˜¾å¾—æœ‰äº›é¸¡è‚‹ï¼Œè¿˜æ²¡æœ‰ä»»ä½•ä¸œè¥¿å±•ç¤ºï¼Œæ“ä½œå®Œå…¨å¯ä»¥æå‰åˆ° `constructor` ä¸­æ¥è¿›è¡Œ  
> ä½†æ˜¯ `componentDidMount` å‡½æ•°ä½œç”¨å°±å¤§å¾—å¤šï¼Œç”±äºè¿™ä¸€è¿‡ç¨‹é€šå¸¸åªèƒ½åœ¨æµè§ˆå™¨ç«¯è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œè·å–å¼‚æ­¥æ•°æ®ï¼Œè€Œä¸”åœ¨ `componentDidMount` è°ƒç”¨çš„æ—¶å€™ï¼Œç»„ä»¶å·²ç»è¢«è£…è½½åˆ° DOM æ ‘ä¸Šäº†ï¼Œè¿˜æœ‰ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–åº“çš„ä»£ç ï¼Œæ¯”å¦‚ Jquery

##### æ›´æ–°è¿‡ç¨‹

ç®€å•æ¥è¯´å°±æ˜¯ props å’Œ state è¢«ä¿®æ”¹çš„è¿‡ç¨‹ï¼Œä¾æ¬¡è°ƒç”¨ `compWillReceiveProps`ã€ `shouldComponentUpdate`. `componentWillUpdate`ã€ `render`ã€ `componentDidUpdate`

1. componentWillReceivePropsï¼ˆnextPropsï¼‰

> å¹¶ä¸æ˜¯åªæœ‰åœ¨ `props` å‘ç”Ÿæ”¹å˜çš„æ—¶å€™æ‰ä¼šè¢«è°ƒç”¨ï¼Œå®é™…ä¸Šåªè¦æ˜¯çˆ¶ç»„ä»¶çš„ `render` å‡½æ•°è¢«è°ƒç”¨ï¼Œ`render`é‡Œé¢è¢«æ¸²æŸ“çš„å­ç»„ä»¶å°±ä¼šè¢«æ›´æ–°ï¼Œä¸ç®¡çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„ `props` æœ‰æ²¡æœ‰è¢«æ”¹å˜ï¼Œéƒ½ä¼šè§¦å‘å­ç»„ä»¶çš„ `componentWillReceiveProps` è¿‡ç¨‹ï¼Œä½†æ˜¯ï¼Œ`this.setState` æ–¹æ³•çš„è§¦å‘è¿‡ç¨‹ä¸ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°é€‚åˆæ ¹æ®æ–°çš„ `props` çš„å€¼æ¥è®¡ç®—å‡ºæ˜¯ä¸æ˜¯è¦æ›´æ–°å†…éƒ¨çŠ¶æ€çš„ `state`ã€‚

2. shouldComponentUpdateï¼ˆnextPropsï¼Œ nextStateï¼‰

> è¿™ä¸ªå‡½æ•°çš„é‡è¦æ€§ï¼Œä»…æ¬¡äº `render`ï¼Œç¨³åç¬¬äºŒæŠŠäº¤æ¤…ï¼Œ`render` å‡½æ•°å†³å®šäº†æ”¹æ¸²æŸ“ä»€ä¹ˆï¼Œè€Œ `shouldComponentUpdate` å†³å®šäº†ä¸éœ€è¦æ¸²æŸ“ä»€ä¹ˆï¼Œè¿™ä¸¤ä½å¤§ä½¬éƒ½éœ€è¦è¿”å›å‡½æ•°ï¼Œè¿™ä¸€è¿‡ç¨‹å¯ä»¥æé«˜æ€§èƒ½ï¼Œå¿½ç•¥æ‰æ²¡æœ‰å¿…è¦é‡æ–°æ¸²æŸ“çš„è¿‡ç¨‹

3. componentWillUpdate å’Œ componentDidUpdate

> å’Œè£…è½½è¿‡ç¨‹ä¸åŒï¼Œè¿™é‡Œçš„ componentDidUpdateï¼Œæ—¢å¯ä»¥åœ¨æµè§ˆå™¨ç«¯æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œ

##### å¸è½½è¿‡ç¨‹

> å¦‚æœä½ å‡†å¤‡å§ç»„ä»¶ä» DOM ç§»é™¤æ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°†ä¼šè¢«è°ƒç”¨ã€‚è¿™è®©æˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶èƒŒåè¿›è¡Œæ¸…ç†ï¼Œæ¯”å¦‚ç§»é™¤ä»»ä½•æˆ‘ä»¬å·²ç»ç»‘å®šçš„äº‹ä»¶ç›‘å¬å™¨ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨è‡ªèº«èƒŒååšæ¸…ç†ï¼Œè€Œå½“å…¶ä¸­ä¸€ä¸ªäº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå°±ä¼šå°è¯•å»è®¡ç®—ä¸€ä¸ªæ²¡æœ‰è½½å…¥çš„ç»„ä»¶ï¼ŒReact å°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

#### React ä¸­ render çš„è§¦å‘æ–¹å¼ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

- é¦–æ¬¡æ¸²æŸ“ `initial Render`
- è°ƒç”¨ `this.setState` (å¹¶ä¸æ˜¯ä¸€æ¬¡ `setState` ä¼šè§¦å‘ä¸€æ¬¡ `render`ï¼Œ`React` å¯èƒ½ä¼šåˆå¹¶æ“ä½œï¼Œå†ç»Ÿä¸€ `render`)
- çˆ¶ç»„ä»¶å‘ç”Ÿæ›´æ–°(`props` å‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å°±ç®— `props` æ²¡æœ‰æ”¹å˜æˆ–è€…çˆ¶å­ç»„ä»¶ä¹‹é—´æ²¡æœ‰æ•°æ®äº¤æ¢ä¹Ÿä¼šé‡æ–° `render`)
- ä½¿ç”¨ `this.forceUpdate` å¼ºåˆ¶ `render`

#### Virtual DOM ç®—æ³•ç®€è¿° [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

åŒ…æ‹¬å‡ ä¸ªæ­¥éª¤

1. ç”¨ JavaScript å¯¹è±¡ç»“æ„è¡¨ç¤º DOM æ ‘çš„ç»“æ„ï¼›ç„¶åç”¨è¿™ä¸ªæ ‘æ„å»ºä¸€ä¸ªçœŸæ­£çš„ DOM æ ‘ï¼Œæ’åˆ°æ–‡æ¡£å½“ä¸­ã€‚
2. å½“çŠ¶æ€å˜æ›´çš„æ—¶å€™ï¼Œé‡æ–°æ„é€ ä¸€æ£µæ–°çš„å¯¹è±¡æ ‘ã€‚ç„¶åç”¨æ–°çš„æ ‘å’Œæ—§çš„æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œè®°å½•ä¸¤æ£µæ ‘å·®å¼‚ã€‚
3. æŠŠ `2` æ‰€è®°å½•çš„å·®å¼‚åº”ç”¨åˆ°æ­¥éª¤ `1` æ‰€æ„å»ºçš„çœŸæ­£çš„ DOM æ ‘ä¸Šï¼Œè§†å›¾å°±æ›´æ–°äº†ã€‚

> Virtual DOM æœ¬è´¨ä¸Šå°±æ˜¯åœ¨ `JS` å’Œ `DOM` ä¹‹é—´åšäº†ä¸€ä¸ªç¼“å­˜ã€‚å¯ä»¥ç±»æ¯” CPU å’Œ ç¡¬ç›˜ï¼Œæ—¢ç„¶ç¡¬ç›˜è¿™ä¹ˆæ…¢ï¼Œæˆ‘ä»¬å°±åœ¨å®ƒä»¬ä¹‹é—´åŠ ä¸ªç¼“å­˜ï¼šæ—¢ç„¶ `DOM` è¿™ä¹ˆæ…¢ï¼Œæˆ‘ä»¬å°±åœ¨å®ƒä»¬ `JS` å’Œ `DOM` ä¹‹é—´åŠ ä¸ªç¼“å­˜ã€‚`CPUï¼ˆJSï¼‰`åªæ“ä½œ`å†…å­˜ï¼ˆVirtualï¼‰`ã€‚

#### Angular å’Œ Vue çš„åŠ¨æ€åˆ·æ–°æ–¹å¼ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

##### Angular

> è„æ£€æŸ¥æ¥åˆ·æ–°æ•°æ®æ˜¾ç¤ºã€‚ä¸€æ¬¡è„æ£€æŸ¥å°±æ˜¯è°ƒç”¨ä¸€æ¬¡ `$apply()` æˆ–è€… `$digest()`,å°†æ•°æ®ä¸­æœ€æ–°çš„å€¼å‘ˆç°åœ¨ç•Œé¢ä¸Šã€‚åœ¨éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè„æ£€æŸ¥æ˜¯ä½æ•ˆçš„, å®ƒçš„æ•ˆç‡åŸºæœ¬ä¸Šå–å†³äºä½ ç»‘å®šçš„è§‚å¯Ÿè€…æ•°é‡ã€‚

##### Vue

> é€šè¿‡ `getter` å’Œ `setter` çš„æ–¹æ³•æ¥æ£€æµ‹åå°æ•°æ®å˜åŒ–ï¼Œä¸€æ—¦å˜åŒ–å°±ä¼šè¢« `setter` æ•æ‰ï¼Œç„¶åæ¥è§¦å‘ç•Œé¢å˜åŒ–ã€‚åŒ Angular äº‹ä»¶é©±åŠ¨çš„æ–¹å¼ä¸åŒçš„æ˜¯é€šè¿‡æ•°æ®é©±åŠ¨çš„ã€‚

Angular å¯ä»¥æ‰‹åŠ¨è§¦å‘ `apply()`æ¥ä¸€æ¬¡æ›´æ–°ç•Œé¢,ä½†æ˜¯ Vue ä¸€æ—¦æ£€æµ‹æ•°æ®å˜åŒ– å°±ä¼šè§¦å‘ç•Œé¢æ›´æ–°ï¼Œè¿™æ˜¯å¾ˆè€—è´¹æ€§èƒ½çš„äº‹ã€‚åˆç†çš„é€‰æ‹©æ‰èƒ½çªç ´ dom ä¼˜åŒ–çš„ç“¶é¢ˆã€‚

#### Reactã€Vue å’Œ Angular çš„æ€§èƒ½æ¯”è¾ƒ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

##### åˆå§‹æ¸²æŸ“

> Virtual DOM > è„æ£€æŸ¥ >= ä¾èµ–æ”¶é›†

##### å°é‡æ•°æ®æ›´æ–°

> ä¾èµ–æ”¶é›† >> Virtual DOM + ä¼˜åŒ– > è„æ£€æŸ¥ï¼ˆæ— æ³•ä¼˜åŒ–ï¼‰ > Virtual DOM æ— ä¼˜åŒ–

##### å¤§é‡æ•°æ®æ›´æ–°

> è„æ£€æŸ¥ + ä¼˜åŒ– >= ä¾èµ–æ”¶é›† + ä¼˜åŒ– > Virtual DOMï¼ˆæ— æ³•/æ— éœ€ä¼˜åŒ–ï¼‰>> MVVM æ— ä¼˜åŒ–

**Virtual DOM çœŸæ­£çš„ä»·å€¼ä»æ¥éƒ½ä¸æ˜¯æ€§èƒ½**ï¼Œè€Œæ˜¯å®ƒ

- ä¸ºå‡½æ•°å¼çš„ UI ç¼–ç¨‹æ–¹å¼æ‰“å¼€äº†å¤§é—¨ï¼›
- å¯ä»¥æ¸²æŸ“åˆ° DOM ä»¥å¤–çš„ Backendï¼Œæ¯”å¦‚ [React Native](https://reactnative.cn/)ã€‚

> ä½¿ç”¨æ„ŸçŸ¥ä¸Šï¼š  
> ng ç›¸å½“äºä¸­é«˜æ¡£é¤å…ï¼Œç”¨é¤è€…çš„å…³æ³¨ç‚¹åœ¨äºç”¨é¤ç¤¼ä»ªã€æ¶ˆè´¹èƒ½åŠ›ç­‰é—®é¢˜ä¸Šã€‚  
> vue ç›¸å½“äºä¾¿åˆ©åº—æˆ–è€…å¿«é¤å…ï¼Œç”¨é¤è€…çš„å…³æ³¨ç‚¹åœ¨äºç”¨é¤æ•ˆç‡ã€‚  
> react åˆ™ç›¸å½“äºå®¶åº­å¨æˆ¿ï¼Œç”¨é¤è€…çš„å…³æ³¨ç‚¹ä¸å†å±€é™äº`åƒ`è¿™ä¸€ä¸ªç‚¹ä¸Šï¼Œæ—¢èƒ½åé¦ˆä¸å¤„ç†é£Ÿç‰©ç»†èŠ‚é—®é¢˜ï¼Œåˆèƒ½æŒæ§åˆ¶ä½œé£Ÿç‰©çš„æµç¨‹......

#### React åˆ›å»ºç»„ä»¶çš„ä¸¤ç§æ–¹å¼ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

- é€šè¿‡ JS å‡½æ•°åˆ›å»ºï¼ˆ**æ— çŠ¶æ€ç»„ä»¶**ï¼‰
- é€šè¿‡ class åˆ›å»ºï¼ˆ**æœ‰çŠ¶æ€ç»„ä»¶**ï¼‰

javascript å‡½æ•°åˆ›å»º, éœ€è¦æ³¨æ„:

- å‡½æ•°åç§°å¿…é¡»ä¸º`å¤§å†™å­—æ¯`å¼€å¤´ï¼ŒReact é€šè¿‡è¿™ä¸ªç‰¹ç‚¹æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªç»„ä»¶
- å‡½æ•°å¿…é¡»æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼å¯ä»¥æ˜¯ï¼š`JSX å¯¹è±¡`æˆ– `null`
- è¿”å›çš„ JSXï¼Œå¿…é¡»æœ‰ä¸€ä¸ª`æ ¹å…ƒç´ `
- ç»„ä»¶çš„è¿”å›å€¼ä½¿ç”¨`()`åŒ…è£¹ï¼Œé¿å…æ¢è¡Œé—®é¢˜

#### æœ‰å…³ key [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

`key` çš„ç‰¹æ®Šå±æ€§ä¸»è¦åœ¨ è™šæ‹Ÿ DOM ç®—æ³•ï¼Œåœ¨æ–°æ—§ `nodes` å¯¹æ¯”æ—¶è¾¨è¯† VNdoesã€‚å¦‚æœä¸é€‚ç”¨ `key`ï¼ŒVue å’Œ React ä¼šä½¿ç”¨ä¸€ç§æœ€å¤§é™åº¦å‡å°‘åŠ¨æ€å…ƒç´ å¹¶ä¸”å°½å¯èƒ½çš„å°è¯•ä¿®å¤ã€å†å¤ç”¨ç›¸åŒç±»å‹å…ƒç´ çš„ç®—æ³•ã€‚ä½¿ç”¨ `key`ï¼Œå®ƒä¼šåŸºäº `key` çš„å˜åŒ–é‡æ–°æ’åˆ—å…ƒç´ é¡ºåºï¼Œå¹¶ä¸”ä¼šç§»é™¤ `key` ä¸å­˜åœ¨çš„å…ƒç´ ã€‚**æœ‰ç›¸åŒçˆ¶å…ƒç´ çš„çš„å­å…ƒç´ å¿…é¡»æœ‰ç‹¬ç‰¹çš„ key**ã€‚é‡å¤çš„ key ä¼šé€ æˆæ¸²æŸ“é”™è¯¯ã€‚

#### Vue ä¿®é¥°ç¬¦ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

##### äº‹ä»¶ä¿®é¥°ç¬¦

```
- .stop <!-- é˜»æ­¢å•å‡»äº‹ä»¶ç»§ç»­ä¼ æ’­ -->
- .prevent <!-- æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ -->
- .capture <!-- æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ -->
- .self <!-- åªå½“åœ¨ event.target æ˜¯å½“å‰å…ƒç´ è‡ªèº«æ—¶è§¦å‘å¤„ç†å‡½æ•° -->
- .once <!-- ç‚¹å‡»äº‹ä»¶å°†åªä¼šè§¦å‘ä¸€æ¬¡ -->
- .passive
- .native <!-- ç»™è‡ªå®šä¹‰çš„ç»„ä»¶æ·»åŠ åŸç”Ÿäº‹ä»¶ -->
```

##### æŒ‰é”®ä¿®é¥°ç¬¦

```
.enter
.tab
.delete <!-- æ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”® -->
.esc
.space
.up
.down
.left
.right
```

##### ç³»ç»Ÿä¿®é¥°ç¬¦

```
.ctrl
.alt
.shift
.meta
```

##### è¡¨å•è¾“å…¥ä¿®é¥°ç¬¦

```
.lazy: <input v-model.lazy="msg" ><!-- åœ¨â€œchangeâ€æ—¶è€Œéâ€œinputâ€æ—¶æ›´æ–° -->
.number: <input v-model.number="age"><!-- å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬ä¸ºæ•°å€¼ç±»å‹ -->
.trim: <input v-model.trim="msg"><!-- è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºç™½å­—ç¬¦ -->
```

#### Vue å…³äº \$emit çš„ç”¨æ³• [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

- çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨ `props` æŠŠæ•°æ®ä¼ ç»™å­ç»„ä»¶ã€‚
- å­ç»„ä»¶å¯ä»¥ä½¿ç”¨ `$emit` è§¦å‘çˆ¶ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚
  > vm.\$emit( event, [â€¦args] ) // å­ç»„ä»¶é€šè¿‡ **\$emit** æ¥è§¦å‘äº‹ä»¶ï¼Œå°†å‚æ•°ä¼ é€’å‡ºå»ã€‚

#### javascript å·¥å‚æ¨¡å¼å‡½æ•°ã€æ„é€ å‡½æ•°ã€åŸå‹æ¨¡å¼ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

##### å·¥å‚å‡½æ•°

> å·¥å‚æ¨¡å¼ä¸­çš„å‡½æ•°ä¸­ä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæœ€å `return` è¿™ä¸ªå¯¹è±¡ï¼Œé€šè¿‡æ¯æ¬¡è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°ä¸åŒæ¥ **è§£å†³åˆ›å»ºå¤šä¸ªç›¸ä¼¼å¯¹è±¡çš„é—®é¢˜**ã€‚

```javascript
// å·¥å‚æ¨¡å¼
function creatPerson(name, age, job) {
  var o = {};
  o.name = name;
  o.age = age;
  o.job = job;
  o.sayName = function() {
    console.log(this.name);
  };
  return o;
}
var tianjiao = creatPerson("tj", 22, "fe");
console.log(tianjiao);
```

##### æ„é€ å‡½æ•°

> æ„é€ å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯å‡½æ•°ï¼Œåªä¸è¿‡æ˜¯ä¸€ä¸ª **åˆ›å»ºå¯¹è±¡** çš„å‡½æ•°

```javascript
// æ„é€ å‡½æ•°
function Person(name, age) {
  this.name = name;
  this.age = age;
  this.sayName = function() {
    console.log(this.name);
  };
}
var tj2 = new Person("tj2", 23);
console.log(tj2);
```

##### åŸå‹æ¨¡å¼

> æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª `prototype` å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„å¥½å¤„æ˜¯å¯ä»¥ **è®©æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«ä»–æ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•**ã€‚

```javascript
// åŸå‹æ–¹æ³•
function Person() {}
Person.prototype.name = "tj3";
Person.prototype.age = 24;
Person.prototype.sayName = function() {
  alert(this.name);
};
var tj3 = new Person();
console.log(tj3);
```

#### äº‹ä»¶è½®è¯¢æœºåˆ¶ bindã€applyã€call çš„åŒºåˆ« [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

`call` å’Œ `apply` éƒ½æ˜¯å¯¹å‡½æ•°çš„ç›´æ¥è°ƒç”¨ï¼Œ**æ”¹å˜ this æŒ‡é’ˆæŒ‡å‘å³æ”¹å˜ä½œç”¨åŸŸ**

```javascript
// ä¼ å‚æ–¹å¼ä¸ä¸€æ ·ï¼Œcallå¿…é¡»å°†å‚æ•°ä»ç¬¬äºŒä½ä¸€ä¸ªä¸ªå¡è¿›å»
call(obj, arg1, arg2, arg3);
apply(obj, [arg1, arg2, arg3]);
```

```javascript
function sum(num1, num2) {
  return num1 + num2;
}
function callFun(a, b) {
  return sum.call(this, a, b);
}
function applyFun(a, b) {
  return sum.apply(this, [a, b]);
  // æˆ–è€…
  // return sum.apply(this,arguments);
}
function bindFun(a, b) {
  //bind æ–¹æ³•è¿”å›çš„ä»ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°
  return sum.bind(this, a, b)();
}
alert(callFun(10, 10)); //20
alert(applyFun(10, 10)); //20
alert(bindFun(10, 10)); //20
```

##### æ‰‹å†™ call

```javascript
Funtion.prototype.mycall = function(context, ...args) {
  const cxt = context ? Object(context) : window; // è¿”å› this å‚æ•°æˆ–è€… window,this å‚æ•°å¯èƒ½ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œé€šè¿‡ Object è½¬æ¢ä¸€ä¸‹
  cxt.fn = this;
  let res = cxt.fn(...args);
  delete cxt.fn;
  return res;
};
```

##### æ‰‹å†™ apply

```javascript
Function.prototype.myapply = function(context, arr) {
  const cxt = context ? Object(context) : window;
  cxt.fn = this;
  let res;
  if (arr) res = cxt.fn(...arr);
  else res = cxt.fn();
  delete cxt.fn;
  return res;
};
```

##### æ‰‹å†™ bind

```javascript
Function.prototype.mybind = function(ctx, ...args) {
  // return (...a)=> this.call(ctx, ...args, ...a);
  return (...a) => this.apply(ctx, [...args, ...a]);
};
```

æµ‹è¯•è„šæœ¬

```javascript
const w = { name: "wgc" };
function testW() {
  console.log(this.name);
  console.log(...arguments);
}
const bindF = testW.mybind(w, "WGC");
bindF("hello");
testW.mycall(w, "nihao", "wgc");
testW.myapply(w, ["NIHAO", "WGC"]);
```

#### å‡½æ•°é˜²æŠ–ã€å‡½æ•°èŠ‚æµ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

- å‡½æ•°é˜²æŠ–ï¼š(ä»»åŠ¡è§¦å‘çš„é—´éš”è¶…è¿‡æŒ‡å®šé—´éš”çš„æ—¶å€™ï¼Œä»»åŠ¡æ‰ä¼šæ‰§è¡Œ)
  - å®šä¹‰ï¼šå¤šæ¬¡è§¦å‘äº‹ä»¶åï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”æ˜¯åœ¨è§¦å‘æ“ä½œç»“æŸæ—¶æ‰§è¡Œã€‚
  - åŸç†ï¼šå¯¹å¤„ç†å‡½æ•°è¿›è¡Œå»¶æ—¶æ“ä½œï¼Œè‹¥è®¾å®šçš„å»¶æ—¶åˆ°æ¥ä¹‹å‰ï¼Œå†æ¬¡è§¦å‘äº‹ä»¶ï¼Œåˆ™æ¸…é™¤ä¸Šä¸€æ¬¡çš„å»¶æ—¶æ“ä½œå®šæ—¶å™¨ï¼Œé‡æ–°å®šæ—¶ã€‚
  - æ‰‹å†™ä»£ç :
  ```javascript
  function debounce(fn, wait = 500) {
    let timer = null;
    return function() {
      clearTimeout(timer);
      timer = setTimeout(() => {
        fn.apply(this, arguments);
      }, wait);
    };
  }
  ```
- å‡½æ•°èŠ‚æµï¼š(æŒ‡å®šæ—¶é—´é—´éš”å†…åªä¼šæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡)
  - å®šä¹‰ï¼šè§¦å‘å‡½æ•°äº‹ä»¶åï¼ŒçŸ­æ—¶é—´é—´éš”å†…æ— æ³•è¿ç»­è°ƒç”¨ï¼Œåªæœ‰ä¸Šä¸€æ¬¡å‡½æ•°æ‰§è¡Œåï¼Œè¿‡äº†è§„å®šçš„æ—¶é—´é—´éš”ï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ¬¡çš„å‡½æ•°è°ƒç”¨
  - åŸç†ï¼šè®¾ç½®çŠ¶æ€ï¼Œå¯¹å¤„ç†å‡½æ•°è¿›è¡Œå»¶æ—¶æ“ä½œï¼Œè‹¥ä¸‹ä¸€æ¬¡äº‹ä»¶è§¦å‘è®¾å®šçš„å»¶æ—¶åˆ°æ¥ä¹‹å‰ï¼ŒçŠ¶æ€è¿˜æ²¡æ›´æ–°ï¼Œäº‹ä»¶æ— æ•ˆã€‚
  - æ‰‹å†™ä»£ç ï¼š
  ```javascript
  function throttle(fn, wait = 500) {
    var timerStatus = true;
    return function() {
      if (!timerStatus) return;
      timerStatus = false;
      setTimeout(() => {
        fn.apply(this, arguments);
        timerStatus = true;
      }, wait);
    };
  }
  ```

#### Vue çˆ¶å­ç»„ä»¶é€šè¿‡ props ä¼ å€¼ç¤ºä¾‹ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
var childNode = {
  template:'<div>{{myMessage}}çš„ç±»å‹æ˜¯{{type}}</div>'ï¼Œ
  props:{'myMessage':Number},
  computed:{
    type(){
      return typeof this.myMessage;
    }
  }
}
var parentNode = {
  template :`
    <div class="parent">
      <my-child :my-message="num"></my-child>
    </div>`,
  components:{
    'myChild': childNode
  },
  data() {
    return {
      num: 1234567,
    }
  }
}

new Vue{(
  el: '#app',
  components: {
    'Home': parentNode
  }
)}
```

#### Vue/React ç»„ä»¶é—´é€šä¿¡ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

##### VUE

- å…„å¼Ÿç»„ä»¶ï¼šåˆ›å»ºä¸€ä¸ªäº‹ä»¶æ€»çº¿ `bus`
  > åœ¨éœ€è¦ä¼ å€¼çš„ç»„ä»¶ä¸­ç”¨ `bus.$emit` è§¦å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶ä¼ é€’å‚æ•°  
  > åœ¨éœ€è¦æ¥æ”¶æ•°æ®çš„ç»„ä»¶ä¸­ç”¨ `bus.$on` ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°ä¸­å¤„ç†ä¼ é€’è¿‡æ¥çš„å‚æ•°
- çˆ¶å‘å­ä¼ å€¼ï¼šåœ¨ç»„ä»¶ä¸­ç»‘å®šå±æ€§ï¼Œå­ç»„ä»¶ä¸­ `props` å°±å¯ä»¥è·å–
- å­å‘çˆ¶ä¼ å€¼ï¼šé€šè¿‡åœ¨å­ç»„ä»¶æ–¹æ³•ä¸­è°ƒç”¨`$emit(æ–¹æ³•å, å‚æ•°)`,æ–¹æ³•åçˆ¶ç»„ä»¶ä¸­ç”¨ `on` ç»‘å®š

##### REACT

- å…„å¼Ÿç»„ä»¶ï¼š
  > `context`ï¼ˆè¿˜å¯ä»¥å¾ˆå¥½çš„é€‚ç”¨è·¨çº§ä¼ å€¼ï¼Œå’Œ `Vue` ä¸­çš„ `bus` å±æ€§ä¸€æ ·éƒ½åº”è¯¥æ˜¯é«˜ä½œç”¨åŸŸçš„å‚æ•°ï¼‰ä¸€ä¸ªæ˜¯ `Context` ç”Ÿäº§è€…ã€ Provider ã€ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œå¦å¤–æ˜¯ä¸€ä¸ª `Context` çš„æ¶ˆè´¹è€…ã€ Consumer ã€ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­èŠ‚ç‚¹ã€‚æ‰€ä»¥ `Context` çš„ä½¿ç”¨åŸºäºç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼
- çˆ¶å‘å­ä¼ å€¼ï¼šåœ¨ç»„ä»¶ä¸­ç»‘å®šå±æ€§ï¼Œå­ç»„ä»¶ä¸­ `props` å°±å¯ä»¥è·å–
- å­å‘çˆ¶ä¼ å€¼ï¼šé€šè¿‡åœ¨å­ç»„ä»¶æ–¹æ³•ä¸­é€šè¿‡ `props` è·å–æ–¹æ³•åï¼Œå›è°ƒçš„æ–¹å¼ä¼ å€¼

#### Vue2.0 æºç ä¹‹ :checkered_flag: VNode [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

å…¶å® `VNode` æ˜¯å¯¹çœŸå® `DOM` çš„ä¸€ç§æŠ½è±¡æè¿°ï¼Œå®ƒçš„æ ¸å¿ƒå®šä¹‰æ— éå°±å‡ ä¸ªå…³é”®å±æ€§ï¼Œæ ‡ç­¾åã€æ•°æ®ã€å­èŠ‚ç‚¹ã€é”®å€¼ç­‰ï¼Œå…¶å®ƒå±æ€§éƒ½æ˜¯éƒ½æ˜¯ç”¨æ¥æ‰©å±• `VNode` çš„çµæ´»æ€§ä»¥åŠå®ç°ä¸€äº›ç‰¹æ®Š `feature` çš„ã€‚ç”±äº `VNode` åªæ˜¯ç”¨æ¥æ˜ å°„åˆ°çœŸå® `DOM` çš„æ¸²æŸ“ï¼Œä¸éœ€è¦åŒ…å«æ“ä½œ `DOM` çš„ç”¨æ³•ï¼Œå› æ­¤å®ƒæ˜¯éå¸¸è½»é‡å’Œç®€å•çš„ã€‚`VirtualDOM` é™¤äº†å®ƒçš„æ•°æ®ç»“æ„çš„å®šä¹‰ï¼Œæ˜ å°„åˆ°çœŸå®çš„ `DOM` å®é™…ä¸Šè¦ç»å† `VNode` çš„ **_create_**ã€**_diff_**ã€**_patch_** ç­‰è¿‡ç¨‹ã€‚

```javascript
/**
 * @param context è¡¨ç¤º VNode çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå®ƒæ˜¯ Component ç±»å‹
 * @param tag è¡¨ç¤ºæ ‡ç­¾ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª Component
 * @param data è¡¨ç¤º VNode çš„æ•°æ®ï¼Œå®ƒæ˜¯ä¸€ä¸ª VNodeData ç±»å‹
 * @param children è¡¨ç¤ºå½“å‰ VNode çš„å­èŠ‚ç‚¹ï¼Œå®ƒæ˜¯ä»»æ„ç±»å‹çš„
 * @param normalizationType è¡¨ç¤ºå­èŠ‚ç‚¹è§„èŒƒçš„ç±»å‹ï¼Œç±»å‹ä¸åŒè§„èŒƒçš„æ–¹æ³•ä¹Ÿå°±ä¸ä¸€æ ·ï¼Œä¸»è¦æ˜¯å‚è€ƒ render å‡½æ•°æ˜¯ç¼–è¯‘ç”Ÿæˆè¿˜æ˜¯ç”¨æˆ·æ‰‹å†™çš„
 */
createElement (
  context: Component,
  tag?: string | Class<Component> | Function | Object,
  data?: VNodeData,
  children?: any,
  normalizationType?: number
){
  // ç”Ÿæˆ VNode çš„è¿‡ç¨‹...
}
```

`Vue` çš„ `update` æ˜¯å®ä¾‹çš„ä¸€ä¸ªç§æœ‰æ–¹æ³•ï¼Œè¢«è°ƒç”¨çš„æ—¶æœºæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œä¸€ä¸ªæ˜¯æ•°æ®æ›´æ–°çš„æ—¶å€™ã€‚`update` æ–¹æ³•çš„ä½œç”¨æ˜¯æŠŠ `VNode` æ¸²æŸ“æˆçœŸå®çš„ `DOM`ã€‚

update çš„æ ¸å¿ƒå°±æ˜¯è°ƒç”¨ `vm.patch` æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨ä¸åŒå¹³å°ï¼ˆæœåŠ¡å™¨ç«¯ã€æµè§ˆå™¨ç«¯ï¼‰çš„å®šä¹‰æ˜¯ä¸ä¸€æ ·çš„

```javascript
update (vnode: VNode, hydrating?: boolean)
```

#### Vue2.0 æºç ä¹‹ :checkered_flag: å“åº”å¼å¯¹è±¡ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

**æ ¸å¿ƒæ˜¯åˆ©ç”¨ ES5 çš„ Object.defineProperty**,è¿™ä¹Ÿæ˜¯ `Vue.js` ä¸ºä»€ä¹ˆä¸èƒ½å…¼å®¹ `IE8` åŠä»¥ä¸‹æµè§ˆå™¨çš„åŸå› ã€‚

`Object.defineProperty` æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚

```javaScript
Object.defineProperty(
  obj, // å®šä¹‰å±æ€§çš„å¯¹è±¡
  prop, // è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°
  descriptor, // å°†è¢«å®šä¹‰æˆ–ä¿®æ”¹å±æ€§çš„æè¿°ç¬¦ã€æ ¸å¿ƒã€‘
)
```

> **observe** çš„åŠŸèƒ½å°±æ˜¯ç”¨æ¥ç›‘æµ‹æ•°æ®çš„å˜åŒ–ã€‚å®ç°æ–¹å¼æ˜¯ç»™é `VNode` çš„å¯¹è±¡ç±»å‹æ•°æ®æ·»åŠ ä¸€ä¸ª `Observer`,å¦‚æœå·²ç»æ·»åŠ è¿‡åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™åœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶ä¸‹å»å®ä¾‹åŒ–ä¸€ä¸ª `Observer` å¯¹è±¡å®ä¾‹ã€‚

Observer æ˜¯ä¸€ä¸ªç±»,å®ƒçš„ä½œç”¨æ˜¯ç»™å¯¹è±¡å±æ€§æ·»åŠ  ã€ getter ã€å’Œã€ setter ã€,ç”¨äº **ä¾èµ–æ”¶é›†** å’Œ **æ´¾å‘æ›´æ–°**

---

**ä¾èµ–æ”¶é›† getter**ï¼ˆé‡ç‚¹å…³æ³¨ä»¥ä¸‹ä¸¤ç‚¹ï¼‰

- `*const dep = new Dep() // å®ä¾‹åŒ–ä¸€ä¸ªDepå®ä¾‹`
- `*åœ¨ get å‡½æ•°ä¸­é€šè¿‡ dep.depend åšä¾èµ–æ”¶é›†`

`Dep` æ˜¯ä¸€ä¸ª `Class`,å®ƒå®šä¹‰äº†ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œå®ƒæœ‰ä¸€ä¸ªé™æ€å±æ€§ `target`ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¨å±€å”¯ä¸€ `Watcher`(åŒä¸€æ—¶é—´å†…åªèƒ½æœ‰ä¸€ä¸ªå…¨å±€çš„ `Watcher` è¢«è®¡ç®—)`ã€‚Dep` å®é™…ä¸Šå°±æ˜¯å¯¹ `Watcher` çš„ä¸€ç§ç®¡ç†ï¼Œ`Dep` è„±ç¦» `Watcher` å•ç‹¬å­˜åœ¨æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚`Watcher` å’Œ `Dep` å°±æ˜¯å…¸å‹çš„ è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼Œä¹Ÿå«åš [å‘å¸ƒ-è®¢é˜…æ¨¡å¼](./README.md#5å‘å¸ƒ-è®¢é˜…æ¨¡å¼)ã€‚

`Watcher` æ˜¯ä¸€ä¸ª `Class`,åœ¨å®ƒçš„æ„é€ å‡½æ•°ä¸­å®šä¹‰äº†ä¸€äº›å’Œ `Dep` ç›¸å…³çš„å±æ€§ï¼š

```javascript
this.deps = [];
this.newDeps = [];
this.depIds = new Set();
this.newDepIds = new Set();
```

**æ”¶é›†è¿‡ç¨‹**ï¼šå½“æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªæ¸²æŸ“ `watcher` çš„æ—¶å€™ï¼Œé¦–å…ˆè¿›å…¥ `watcher` çš„æ„é€ å‡½æ•°é€»è¾‘ï¼Œç„¶åæ‰§è¡Œä»–çš„`this.get()`æ–¹æ³•ï¼Œè¿›å…¥ `get` å‡½æ•°æŠŠ `Dep.target` èµ‹å€¼ä¸ºå½“å‰æ¸²æŸ“ `watcher` å¹¶å‹æ ˆï¼ˆä¸ºäº†æ¢å¤ç”¨ï¼‰ã€‚æ¥ç€æ‰§è¡Œ`vm._render()`æ–¹æ³•ï¼Œç”Ÿæˆæ¸²æŸ“ `VNode`,å¹¶ä¸”åœ¨è¿™ä¸ªè¿‡ç¨‹å¯¹ `vm` ä¸Šçš„æ•°æ®è®¿é—®ï¼Œè¿™ä¸ªæ—¶å€™å°±è§¦å‘æ•°æ®å¯¹è±¡çš„ `getter`ï¼ˆåœ¨æ­¤æœŸé—´æ‰§è¡Œ`Dep.target.addDep(this)`æ–¹æ³•ï¼Œå°† `watcher` è®¢é˜…åˆ°è¿™ä¸ªæ•°æ®æŒæœ‰çš„ `dep` çš„ `subs` ä¸­ï¼Œä¸ºåç»­æ•°æ®å˜åŒ–æ—¶é€šçŸ¥åˆ°å“ªäº› `subs` åšå‡†å¤‡ï¼‰ã€‚ç„¶åé€’å½’éå†æ·»åŠ æ‰€æœ‰å­é¡¹çš„ `getterã€‚`

> `Watcher` åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ä¸¤ä¸ª `Dep` `å®ä¾‹æ•°ç»„ã€‚newDeps` ä»£è¡¨æ–°æ·»åŠ çš„ `Dep` å®ä¾‹æ•°ç»„ï¼Œ`deps` ä»£è¡¨ä¸Šä¸€æ¬¡æ·»åŠ çš„ `Dep` å®ä¾‹æ•°ç»„ã€‚  
> ä¾èµ–æ¸…ç©ºï¼šåœ¨æ‰§è¡Œæ¸…ç©ºä¾èµ–ï¼ˆ`cleanupDeps`ï¼‰å‡½æ•°æ—¶ï¼Œä¼šé¦–å…ˆéå† `deps`,ç§»é™¤å¯¹ `dep` çš„è®¢é˜…ï¼Œç„¶åæŠŠ `newDepsIds` å’Œ `depIds` äº¤æ¢ï¼Œ`newDeps` å’Œ `deps` äº¤æ¢ï¼Œå¹¶æŠŠ `newDepIds` å’Œ `newDeps` æ¸…ç©ºã€‚è€ƒè™‘åœºæ™¯ï¼Œåœ¨æ¡ä»¶æ¸²æŸ“æ—¶ï¼ŒåŠæ—¶å¯¹ä¸éœ€è¦æ¸²æŸ“æ•°æ®çš„è®¢é˜…ç§»é™¤ï¼Œå‡å°‘æ€§èƒ½æµªè´¹ã€‚

è€ƒè™‘åˆ° Vue æ˜¯æ•°æ®é©±åŠ¨çš„ï¼Œæ‰€ä»¥æ¯æ¬¡æ•°æ®å˜åŒ–éƒ½ä¼šé‡å†™ Render,é‚£ä¹ˆ`vm._render()`æ–¹æ³•ä¼šå†æ¬¡æ‰§è¡Œï¼Œå¹¶å†æ¬¡è§¦å‘æ•°æ®ã€‚

æ”¶é›†ä¾èµ–çš„ç›®çš„æ˜¯ä¸ºäº†å½“è¿™äº›å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œè§¦å‘å®ƒä»¬çš„ setter çš„æ—¶å€™ï¼Œèƒ½çŸ¥é“åº”è¯¥é€šçŸ¥å“ªäº›è®¢é˜…è€…å»åšç›¸åº”çš„é€»è¾‘å¤„ç†ã€**æ´¾å‘æ›´æ–°**ã€‘

---

**æ´¾å‘æ›´æ–° setter**ï¼ˆé‡ç‚¹å…³æ³¨ä»¥ä¸‹ä¸¤ç‚¹ï¼‰

- `*childOb = !shallow && observe(newVal) // å¦‚æœshallowä¸ºfalseçš„æƒ…å†µï¼Œä¼šå¯¹æ–°è®¾ç½®çš„å€¼å˜æˆä¸€ä¸ªå“åº”å¼å¯¹è±¡`
- `*dep.notify() // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…`

**æ´¾å‘è¿‡ç¨‹**ï¼šå½“æˆ‘ä»¬ç»„ä»¶ä¸­å¯¹å“åº”çš„æ•°æ®åšäº†ä¿®æ”¹ï¼Œå°±ä¼šè§¦å‘ `setter` çš„é€»è¾‘ï¼Œæœ€åè°ƒç”¨`dep.notify()`æ–¹æ³•ï¼Œå®ƒæ˜¯ `Dep` çš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ã€‚å…·ä½“åšæ³•æ˜¯éå†ä¾èµ–æ”¶é›†ä¸­å»ºç«‹çš„ `subs`ï¼Œä¹Ÿå°±æ˜¯ `Watcher` çš„å®ä¾‹æ•°ç»„ã€`subs` æ•°ç»„åœ¨ä¾èµ–æ”¶é›† `getter` ä¸­è¢«æ·»åŠ ï¼ŒæœŸé—´é€šè¿‡ä¸€äº›é€»è¾‘å¤„ç†åˆ¤æ–­ä¿è¯åŒä¸€æ•°æ®ä¸ä¼šè¢«æ·»åŠ å¤šæ¬¡ã€‘ï¼Œç„¶åè°ƒç”¨æ¯ä¸€ä¸ª `watcher` çš„ `update` æ–¹æ³•ã€‚

`update` å‡½æ•°ä¸­æœ‰ä¸ª`queueWatcher(this)`æ–¹æ³•å¼•å…¥äº†é˜Ÿåˆ—çš„æ¦‚å¿µï¼Œæ˜¯ `vue` åœ¨åšæ´¾å‘æ›´æ–°æ—¶ä¼˜åŒ–çš„ä¸€ä¸ªç‚¹ï¼Œå®ƒå¹¶ä¸ä¼šæ¯æ¬¡æ•°æ®æ”¹å˜éƒ½ä¼šè§¦å‘ `watcher` å›è°ƒï¼Œè€Œæ˜¯æŠŠè¿™äº› `watcher` å…ˆæ·»åŠ åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œç„¶ååœ¨ nextTick åæ‰§è¡Œ `watcher` çš„ `run` å‡½æ•°
**é˜Ÿåˆ—æ’åºä¿è¯ï¼š**

1. ç»„ä»¶çš„æ›´æ–°ç”±çˆ¶åˆ°å­ã€‚çˆ¶ç»„ä»¶åˆ›å»ºæ—©äºå­ç»„ä»¶ï¼Œ`watcher` çš„åˆ›å»ºä¹Ÿæ˜¯
2. ç”¨æˆ·è‡ªå®šä¹‰ `watcher` è¦æ—©äºæ¸²æŸ“ `watcher` æ‰§è¡Œï¼Œå› ä¸ºç”¨æˆ·è‡ªå®šä¹‰ `watcher` æ˜¯åœ¨æ¸²æŸ“ `watcher` å‰åˆ›å»ºçš„
3. å¦‚æœä¸€ä¸ªç»„ä»¶åœ¨çˆ¶ç»„ä»¶ `watcher` æ‰§è¡ŒæœŸé—´è¢«é”€æ¯ï¼Œé‚£ä¹ˆå®ƒå¯¹åº”çš„ `watcher` æ‰§è¡Œéƒ½å¯ä»¥è¢«è·³è¿‡ï¼Œæ‰€ä»¥çˆ¶ç»„ä»¶çš„ `watcher` åº”è¯¥å…ˆæ‰§è¡Œã€‚

- é˜Ÿåˆ—éå†ï¼šæ’åºå®Œæˆåï¼Œå¯¹é˜Ÿåˆ—è¿›è¡Œéå†ï¼Œæ‹¿åˆ°å¯¹åº”çš„ `watcher`,æ‰§è¡Œ`watcher.run()`ã€‚

**run å‡½æ•°è§£æ**ï¼šå…ˆé€šè¿‡`this.get()`å¾—åˆ°å®ƒå½“å‰çš„å€¼ï¼Œç„¶ååšåˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æ–°æ—§å€¼ä¸ç­‰ã€æ–°å€¼æ˜¯å¯¹è±¡ç±»å‹ã€deep æ¨¡å¼ä»»ä½•ä¸€ä¸ªæ¡ä»¶ï¼Œåˆ™æ‰§è¡Œ `watcher` çš„å›è°ƒï¼Œæ³¨æ„å›è°ƒå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ä¼šæŠŠç¬¬ä¸€ä¸ªå‚æ•°å’Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æ–°å€¼ `value` å’Œæ—§å€¼ `oldValue`ã€‚<u>_è¿™å°±æ˜¯å½“æˆ‘ä»¬è‡ªå·±æ·»åŠ  watcher æ—¶å€™å¯ä»¥åœ¨å‚æ•°ä¸­å–åˆ°æ–°æ—§å€¼çš„æ¥æº_</u>ã€‚å¯¹åº”æ¸²æŸ“ `watcher` è€Œè¨€ï¼Œåœ¨æ‰§è¡Œ`this.get()`æ–¹æ³•æ±‚å€¼çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œ `getter` æ–¹æ³•ã€‚å› æ­¤åœ¨æˆ‘ä»¬ä¿®æ”¹ç»„ä»¶ç›¸å…³æ•°æ®æ—¶å€™ï¼Œä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ¥ç€é‡æ–°æ‰§è¡Œ `patch` çš„è¿‡ç¨‹

---

##### æ‰‹å†™ä¸€ä¸ªæ•°æ®ç»‘å®šï¼š

```javascript
<input id="input" type="text" />
<div id="text"></div>

let input = document.getElementById("input");
let text = document.getElementById("text");
let data = { value: "" };
Object.defineProperty(data, "value", {
  set: function(val) {
    text.innerHTML = val;
    input.value = val;
  },
  get: function() {
    return input.value;
  }
});
input.onkeyup = function(e) {
  data.value = e.target.value;
};
```

#### Vue2.0 æºç ä¹‹ :checkered_flag: NextTick [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

JS æ‰§è¡Œæ˜¯å•çº¿ç¨‹çš„ï¼Œå®ƒåŸºäº`äº‹ä»¶å¾ªç¯`ã€‚äº‹ä»¶å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

1. æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆã€‚
2. ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªã€ ä»»åŠ¡é˜Ÿåˆ— ã€ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨ã€ ä»»åŠ¡é˜Ÿåˆ— ã€ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚
3. ä¸€æ—¦æ‰§è¡Œæ ˆä¸­æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ã€ ä»»åŠ¡é˜Ÿåˆ— ã€ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥æ‰§è¡Œä»»åŠ¡å°±ä¼šç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚
4. ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢æ“ä½œã€‚

> ç»“åˆ `setter` åˆ†æï¼Œæ•°æ®çš„å˜åŒ–åˆ° `Dom` çš„é‡æ–°æ¸²æŸ“æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹ï¼Œå‘ç”Ÿåœ¨ä¸‹ä¸€ä¸ª `tick`ã€‚å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¯”å¦‚åœ¨æœåŠ¡ç«¯æ¥å£å¼‚æ­¥è·å–æ•°æ®æ—¶å€™ï¼Œå¦‚æœæŸäº›æ–¹æ³•æ˜¯ä¾èµ–æ•°æ®ä¿®æ”¹åçš„ `DOM`ï¼Œå°±å¿…é¡»å°†æ–¹æ³•å†™åœ¨ `nextTick` åæ‰§è¡Œã€‚

```javascript
getNames(res).then(() => {
  this.userNames = res.data;
  console.log(this.$refs.userNames); // userNameså¹¶æ²¡æœ‰è¢«æ›´æ–°
  this.$nextTick(() => {
    console.log(this.$refs.userNames); // è·å–æ¸²æŸ“æ›´æ–°åçš„userNames
  });
});
```

> å°±åœ¨ä»Šå¤©ï¼Œ2.0 åˆšåˆšæ•´ç†å®Œæ¯•ï¼Œ3.0 æ­£å¼æ¨å‡ºã€‚:point_right:[å¿«ä¹å°±å®Œäº‹äº†](https://vue-composition-api-rfc.netlify.com/#api-introduction):point_left:

#### macro/micro task å®ä»»åŠ¡ã€å¾®ä»»åŠ¡ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

æµè§ˆå™¨ä¸ºäº†èƒ½å¤Ÿä½¿ `JS` å†…éƒ¨ `macro task` ä¸ `DOM` ä»»åŠ¡èƒ½æœ‰åºçš„æ‰§è¡Œï¼Œä¼šåœ¨ä¸€ä¸ª `macro task` æ‰§è¡Œç»“æŸåï¼Œåœ¨ä¸‹ä¸€ä¸ª `macro task` æ‰§è¡Œå¼€å§‹å‰ï¼Œé˜Ÿåˆ—æ²¡è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼›

> æ‰§è¡Œé¡ºåºï¼š_macro task_ --> _æ¸²æŸ“ DOM_ --> _macro task_

- å®ä»»åŠ¡ï¼ˆmacro taskï¼‰ä¸»è¦åŒ…å«ï¼š
  - script
  - setTimeout
  - setInterval
  - I/Oã€UI äº¤äº’äº‹ä»¶
  - postMessage
  - MessageChannel
  - setImmediate(Node.js)

å¾®ä»»åŠ¡`micro task`ï¼šå¯ä»¥ç†è§£æ˜¯å½“å‰ `task` æ‰§è¡Œç»“æŸåç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯åœ¨ `macro task` å’Œ `æ¸²æŸ“ DOM`ä¹‹é—´æ‰§è¡Œçš„å†…å®¹ã€‚

- å¾®ä»»åŠ¡ï¼ˆmicro taskï¼‰ä¸»è¦åŒ…æ‹¬ï¼š
  - Promise.then
  - MutaionObserver
  - process.nextTick(Node.js)

#### æ·±åº¦éå† [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
// æ–¹æ¡ˆä¸€
let deepTraversal1 = (node, nodeList = []) => {
  if (node !== null) {
    nodeList.push(node);
    let children = node.children || [];
    for (let i = 0; i < children.length; i++) {
      deepTraversal1(children[i], nodeList);
    }
  }
  console.log(nodeList);
  return nodeList;
};
```

```javascript
// æ–¹æ¡ˆäºŒ
let deepTraversal2 = node => {
  let nodes = [];
  if (node !== null) {
    nodes.push(node);
    let children = node.children || [];
    for (let i = 0; i < children.length; i++) {
      nodes = nodes.concat(deepTraversal2(children[i]));
    }
  }
  console.log(nodes);
  return nodes;
};
```

```javascript
// æ–¹æ¡ˆä¸‰ã€‚éé€’å½’
let deepTraversal3 = node => {
  let stack = [];
  let nodes = [];
  if (node) {
    // æ¨å…¥å½“å‰å¤„ç†çš„node
    stack.push(node);
    while (stack.length) {
      let item = stack.pop();
      let children = item.children || [];
      nodes.push(item);
      // nodes = [] stack = [parent]
      // nodes = [parent] stack = [child3,child2,child1]
      // nodes = [parent, child1] stack = [child3,child2,child1-2,child1-1]
      // nodes = [parent, child1-1] stack = [child3,child2,child1-2]
      for (let i = children.length - 1; i >= 0; i--) {
        stack.push(children[i]);
      }
    }
  }
  console.log(nodes);
  return nodes;
};
```

#### å¹¿åº¦éå† [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
let widthTraversal = node => {
  let nodes = [];
  let stack = [];
  if (node) {
    stack.push(node);
    while (stack.length) {
      let item = stack.shift();
      let children = item.children || [];
      nodes.push(item);
      // é˜Ÿåˆ—ï¼Œå…ˆè¿›å…ˆå‡º
      // nodes = [] stack = [parent]
      // nodes = [parent] stack = [child1,child2,child3]
      // nodes = [parent, child1] stack = [child2,child3,child1-1,child1-2]
      // nodes = [parent,child1,child2]
      for (let i = 0; i < children.length; i++) {
        stack.push(children[i]);
      }
    }
  }
  console.log(nodes);
  return nodes;
};
```

#### JS å¼‚æ­¥è§£å†³æ–¹æ¡ˆçš„å‘å±•å†ç¨‹ä»¥åŠä¼˜ç¼ºç‚¹ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

##### 1.å›è°ƒå‡½æ•° callback

```javascript
setTimeout(() => {
  // callback å‡½æ•°ä½“
}, 1000);
```

ç¼ºç‚¹ï¼šå›è°ƒåœ°ç‹±ï¼Œä¸èƒ½ç”¨ `try catch` æ•è·é”™è¯¯ï¼Œä¸èƒ½ `return`
ä¼˜ç‚¹ï¼šè§£å†³äº†åŒæ­¥é—®é¢˜

---

##### 2.Promise

```javascript
ajax("XXX1")
  .then(res => {
    // æ“ä½œé€»è¾‘
    return ajax("XXX2");
  })
  .then(res => {
    // æ“ä½œé€»è¾‘
    return ajax("XXX3");
  })
  .then(res => {
    // æ“ä½œé€»è¾‘
  });
```

ç¼ºç‚¹ï¼šæ— æ³•å–æ¶ˆ `promise`ï¼Œé”™è¯¯éœ€è¦é€šè¿‡ `catch` å›è°ƒå‡½æ•°æ¥æ•è·
ä¼˜ç‚¹ï¼šè§£å†³äº†å›è°ƒåœ°ç‹±

---

##### 3.Generator

```javascript
function* fetch() {
  yield ajax("XXX1", () => {});
  yield ajax("XXX2", () => {});
  yield ajax("XXX3", () => {});
}
let it = fetch();
let result1 = it.next();
let result2 = it.next();
let result3 = it.next();
```

ä¼˜ç‚¹ï¼šå¯ä»¥æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œ

---

##### 4.Async/await å¼‚æ­¥çš„ç»ˆæè§£å†³æ–¹æ¡ˆ

```javascript
async function test() {
  // ä»¥ä¸‹ä»£ç æ²¡æœ‰ä¾èµ–æ€§çš„è¯ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ Promise.all çš„æ–¹å¼
  // å¦‚æœæœ‰ä¾èµ–æ€§çš„è¯ï¼Œå…¶å®å°±æ˜¯è§£å†³å›è°ƒåœ°ç‹±çš„ä¾‹å­äº†
  await fetch("XXX1");
  await fetch("XXX2");
  await fetch("XXX3");
}
```

ä¼˜ç‚¹ï¼šä»£ç æ¸…æ™°ï¼Œå¤„ç†äº†å›è°ƒåœ°ç‹±ï¼Œä¸ç”¨å†™ä¸€å¤§å † `then` å›è°ƒ
ç¼ºç‚¹ï¼šå°†å¼‚æ­¥ä»£ç æ”¹é€ ä¸ºå›è°ƒï¼Œå¦‚æœå¤šä¸ªå¼‚æ­¥ä¹‹é—´æ²¡æœ‰ä¾èµ–ä¼šé™ä½æ€§èƒ½

#### æ‰‹å†™ Promise.all/race [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
// Promise.all/race çš„ä½¿ç”¨ç¤ºä¾‹
function test(num) {
  return new Promise((resolve, reject) => {
    if (num < 5) {
      setTimeout(() => {
        resolve(`æ‰§è¡ŒæˆåŠŸ${num}å°äº5`);
      }, 1000);
    }
    if (num > 5) {
      setTimeout(() => {
        reject(`æ‰§è¡Œå¤±è´¥${num}å¤§äº5`);
      }, 500);
    }
  });
}
let p1 = test(3);
let p2 = test(8);
let p3 = Promise.reject("æ‰§è¡Œç»“æŸ");

Promise.all([p1, p2])
  .then(result => {
    console.log(result);
  })
  .catch(error => {
    console.error(error); // æ‰§è¡Œå¤±è´¥8å¤§äº5
  });

Promise.race([p1, p3, p2])
  .then(result => {
    console.log(result);
  })
  .catch(error => {
    console.error(error); // æ‰§è¡Œç»“æŸ
  });
```

> `Promise.all` å¯ä»¥å°†å¤šä¸ª `Promise` å®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„ `Promise` å®ä¾‹ã€‚åŒæ—¶ï¼ŒæˆåŠŸå’Œå¤±è´¥çš„è¿”å›å€¼æ˜¯ä¸åŒçš„ï¼ŒæˆåŠŸçš„æ—¶å€™è¿”å›çš„æ˜¯ä¸€ä¸ªç»“æœæ•°ç»„ï¼Œè€Œå¤±è´¥çš„æ—¶å€™åˆ™è¿”å›æœ€å…ˆè¢« reject å¤±è´¥çŠ¶æ€çš„å€¼ã€‚

> `Promse.race` å°±æ˜¯èµ›è·‘çš„æ„æ€ï¼Œæ„æ€å°±æ˜¯è¯´ï¼Œ`Promise.race([p1, p2, p3])`é‡Œé¢å“ªä¸ªç»“æœè·å¾—çš„å¿«ï¼Œå°±è¿”å›é‚£ä¸ªç»“æœï¼Œä¸ç®¡ç»“æœæœ¬èº«æ˜¯æˆåŠŸçŠ¶æ€è¿˜æ˜¯å¤±è´¥çŠ¶æ€ã€‚

```javascript
Promise._all = list =>
  new Promise((resolve, reject) => {
    let resP = [];
    let count = 0;
    list.forEach((index, pro) => {
      resolve(pro).then(
        res => {
          count++;
          resP[index] = res;
          if (count === list.length) resove(resP);
        },
        err => {
          reject(err);
        }
      );
    });
  });
Promise._race = list = new Promise((resolve, reject) => {
  list.forEach(pro => {
    pro.then(resove, reject);
  });
});
```

#### HTTP2 å¤šè·¯å¤ç”¨ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

`HTTP2` é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ä¼ è¾“ï¼Œå–ä»£äº† `HTTP1` çš„æ–‡æœ¬æ ¼å¼ï¼ŒäºŒè¿›åˆ¶è§£ææ›´é«˜æ•ˆã€‚å¤šè·¯å¤ç”¨ä»£æ›¿äº† `HTTP1` çš„åºåˆ—å’Œé˜»å¡æœºåˆ¶ï¼Œæ‰€æœ‰ç›¸åŒåŸŸåä¸‹çš„è¯·æ±‚éƒ½åœ¨ç»Ÿä¸€ `TCP` è¿æ¥å¹¶å‘å®Œæˆã€‚åœ¨ `HTTP1` ä¸­ï¼Œæ¯ä¸€ä¸ªè¯·æ±‚éœ€è¦å»ºç«‹ä¸€ä¸ª `TCP` é“¾æ¥ã€‚`HTTP2` ä¸­ï¼š

- åŒåŸŸåä¸‹æ‰€æœ‰é€šä¿¡éƒ½åœ¨åŒä¸€ `TCP` è¿æ¥ä¸‹å®Œæˆï¼Œæ¶ˆé™¤äº†å¤šä¸ª `TCP` è¿æ¥å¸¦æ¥çš„å»¶æ—¶å’Œå†…å­˜æ¶ˆè€—ã€‚
- å•ä¸ªè¿æ¥å¯ä»¥å¹¶è¡Œäº¤é”™çš„è¯·æ±‚å’Œå“åº”ï¼Œä¹‹é—´äº’ä¸å¹²æ‰°ã€‚

#### å›æµå’Œé‡ç»˜ï¼ˆreflowï¼Œrepaintï¼‰ [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

##### å›æµï¼š

> å½“ `render tree` ä¸­çš„ä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨å› ä¸ºå…ƒç´ çš„è§„æ¨¡å°ºå¯¸ï¼Œå¸ƒå±€ï¼Œéšè—ç­‰æ”¹å˜è€Œéœ€è¦é‡æ–°æ„å»ºã€‚è¿™å°±ç§°ä¸ºå›æµã€‚

##### é‡ç»˜ï¼š

> å½“ `render tree` ä¸­çš„ä¸€äº›å…ƒç´ éœ€è¦æ›´æ–°å±æ€§ï¼Œè€Œè¿™äº›å±æ€§åªæ˜¯å½±å“å…ƒç´ çš„å¤–è§‚ï¼Œé£æ ¼ï¼Œè€Œä¸ä¼šå½±å“å¸ƒå±€çš„ï¼Œæ¯”å¦‚ `background-color`ã€‚åˆ™å°±å«ç§°ä¸ºé‡ç»˜ã€‚

å›æµä¸€å®šä¼šå‘ç”Ÿé‡ç»˜ï¼Œè€Œé‡ç»˜ä¸ä¸€å®šæœ‰å›æµï¼ˆæ¯”å¦‚å…ƒç´ é¢œè‰²æ”¹å˜ã€æ»šåŠ¨æ¡æ»‘åŠ¨ï¼‰

##### å‡å°‘é‡ç»˜ä¸å›æµï¼š

- CSS:
  - ä½¿ç”¨ transform æ›¿ä»£ top
  - ä½¿ç”¨ visibility æ›¿æ¢ display: none
  - é¿å…ä½¿ç”¨ table å¸ƒå±€
  - é¿å…è®¾ç½®å¤šå±‚å†…è”æ ·å¼
  - é¿å…ä½¿ç”¨ CSS è¡¨è¾¾å¼
  - ......
- JavaScript
  - é¿å…é¢‘ç¹æ“ä½œæ ·å¼
  - é¿å…é¢‘ç¹æ“ä½œ DOM
  - å¯¹å¤æ‚åŠ¨ç”»è„±ç¦»æ–‡æ¡£æµä½¿ç”¨ç»å¯¹å®šä½

#### React ä¸­ setState æ›´æ–°æ•°æ® [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

```javascript
class Example extends React.Component {
  constructor() {
    super();
    this.state = {
      val: 0
    };
  }
  componentDidMount() {
    this.setState({ val: this.state.val + 1 });
    // ç¬¬ 1 æ¬¡ log
    console.log(this.state.val);
    this.setState({ val: this.state.val + 1 });
    // ç¬¬ 2 æ¬¡ log
    console.log(this.state.val);
    setTimeout(() => {
      this.setState({ val: this.state.val + 1 });
      // ç¬¬ 3 æ¬¡ log
      console.log(this.state.val);
      this.setState({ val: this.state.val + 1 });
      // ç¬¬ 4 æ¬¡ log
      console.log(this.state.val);
    }, 0);
  }
  render() {
    return null;
  }
}
// ç»“æœ 0 0 2 3ï¼›
```

åœ¨ React ä¸­ï¼Œä¸¤ç§è°ƒç”¨ `this.setState` çš„æ–¹å¼ï¼š

> a.é€šè¿‡ `addEventListener` å¼•å‘çš„äº‹ç‰©å¤„ç†ï¼ˆæ¯”å¦‚ `onClick` å¼•å‘çš„)ã€‚  
> b.é€šè¿‡ `setTimeout`/`setInterval` äº§ç”Ÿçš„å¼‚æ­¥è°ƒç”¨ã€‚

åœ¨ `setState` çš„å®ç°ä¸­ï¼Œä¼šæ ¹æ®ä¸€ä¸ªå˜é‡ `isBatchingUpdates` åˆ¤æ–­æ˜¯ç›´æ¥æ›´æ–° `this.state` è¿˜æ˜¯æ”¾åˆ° `task` ä¸­ä¸‹æ¬¡å†è¯´ã€‚ä»¥ä¸Šä¸¤ç§æƒ…å†µï¼š

a æƒ…å†µæ˜¯æ”¾åˆ°ä¸‹æ¬¡é˜Ÿåˆ—ä¸­åˆå¹¶ `setState` ä¸€èµ·æ‰§è¡Œï¼Œäº§ç”Ÿå¼‚æ­¥æ‰§è¡Œã€‚
b æƒ…å†µä¼šåŒæ­¥æ‰§è¡Œ `setState`

#### å¯¹æ¯” Redux å’Œ Vuex [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

##### Flux

> View --> Action --> Dispatcher --> state --> View

##### Redux

> View --> action --> Reducer --> state --> View(åŒæ­¥å¼‚æ­¥ä¸€æ ·)

##### Vuex

> View --> commit --> mutations --> state --> View(åŒæ­¥)  
> View --> dispatch --> action --> mutations --> state --> View(å¼‚æ­¥)

##### å…±åŒç‚¹

é¦–å…ˆä¸¤è€…éƒ½æ˜¯å¤„ç†å…¨å±€çŠ¶æ€çš„å·¥å…·åº“ï¼Œå¤§è‡´å®ç°æ€æƒ³éƒ½æ˜¯ï¼š

> _å…¨å±€ state ä¿å­˜çŠ¶æ€_ --> _dispatch(action)_ --> _reducer(Vuex é‡Œçš„ mutation)_ --> _ç”Ÿæˆ newState_;

æ•´ä¸ªçŠ¶æ€ä¸ºåŒæ­¥æ“ä½œã€‚

##### åŒºåˆ«

æœ€å¤§çš„åŒºåˆ«åœ¨äºå¤„ç†å¼‚æ­¥çš„ä¸åŒï¼Œã€ Vuex ã€é‡Œé¢å¤šäº†ä¸€æ­¥ `commit` æ“ä½œï¼Œåœ¨ `action` ä¹‹å `commit(mutation)`ä¹‹å‰å¤„ç†å¼‚æ­¥ï¼Œè€Œ ã€ redux ã€é‡Œé¢åˆ™æ˜¯é€šè¿‡ä¸­é—´ä»¶å¤„ç†

#### Vue/React çš„ diff ä¼˜åŒ– [:rocket:](#ä¸»è¦å†…å®¹åŒ…å«)

ä¼˜åŒ–çš„è¡¨ç°ä¸ºï¼š**æ—¶é—´å¤æ‚åº¦ä» O(N<sup>3</sup>)é™åˆ° O(N)**

React å’Œ Vue åšçš„å‡è®¾æ˜¯ï¼š

- æ£€æµ‹ VDOM çš„å˜åŒ–åªå‘ç”Ÿåœ¨åŒä¸€å±‚
- æ£€æµ‹ VDOM çš„å˜åŒ–ä¾èµ–äºç”¨æˆ·æŒ‡å®šçš„ `key`

> å¦‚æœå˜åŒ–å‘ç”Ÿåœ¨ä¸åŒå±‚æˆ–è€…åŒæ ·çš„å…ƒç´ ç”¨æˆ·æŒ‡å®šäº†ä¸åŒçš„ `key` æˆ–è€…ä¸åŒå…ƒç´ ç”¨æˆ·æŒ‡å®šåŒæ ·çš„ `key`ï¼ŒReact å’Œ Vue éƒ½ä¸ä¼šæ£€æµ‹åˆ°ï¼Œå°±ä¼šå‘ç”Ÿè«åå…¶å¦™çš„é—®é¢˜ã€‚

ä½†æ˜¯ React è®¤ä¸ºï¼Œå‰ç«¯ç¢°åˆ°ä¸Šé¢çš„ç¬¬ä¸€ç§æƒ…å†µæ¦‚ç‡å¾ˆå°ï¼Œç¬¬äºŒç§æƒ…å†µåˆå¯ä»¥é€šè¿‡æç¤ºç”¨æˆ·ï¼Œè®©ç”¨æˆ·å»è§£å†³ï¼Œå› æ­¤è¿™ä¸ªå–èˆæ˜¯å€¼å¾—çš„ã€‚æ²¡æœ‰ç‰ºç‰²ç©ºé—´å¤æ‚åº¦ï¼Œå´æ¢æ¥äº†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ—¶é—´ä¸Šçš„å·¨å¤§æå‡ã€‚

### å‰ç«¯å¸¸è¯†

#### å‰ç«¯ç™»å½•éœ€è¦å¤„ç†çš„æµç¨‹ [:ledger:](#ä¸»è¦å†…å®¹åŒ…å«)

1. ç™»å½•å‰å‘é€ä¸€ä¸ª GET è¯·æ±‚æ‹¿åˆ°ä¸€ä¸ªéªŒè¯ç 
2. é€šè¿‡éªŒè¯ç è¿›è¡ŒåŠ å¯†è´¦å·å¯†ç å‘é€ POST
3. åç«¯é€šè¿‡éªŒè¯ç è§£å¯†è´¦å·å¯†ç é€šè¿‡è¿”å› token å­˜å…¥ç¼“å­˜ã€‚
4. é¡µé¢è·³è½¬å‰è¯»å–ç”¨æˆ·ä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰ç”¨æˆ·ä¿¡æ¯ï¼ˆç¬¬ä¸€æ¬¡ç™»å½•å’Œåˆ·æ–°é¡µé¢ï¼‰ï¼Œé€šè¿‡ token æ‹‰å–ç”¨æˆ·ä¿¡æ¯å­˜å‚¨ã€‚
5. ç”¨æˆ·ä¿¡æ¯ç­‰å­˜ sessionï¼ˆåˆ·æ–°é¡µé¢ä¿è¯ç”¨æˆ·ä¿¡æ¯æœ€æ–°æ€§ï¼‰ã€‚é€šè¿‡ç”¨æˆ·æƒé™é‡å†™è·¯ç”±ä¿¡æ¯ã€‚
6. å¦‚æœé€šè¿‡ token è¿‡æœŸï¼Œå‘é€è¯·æ±‚ 401ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µé¢é‡æ–°ç™»å½•

> ä»¥ä¸Šæ˜¯æœ¬äººåœ¨é¡¹ç›®ç™»å½•å®ç°ä¸Šçš„ä¸€äº›æ€»ç»“ï¼Œä»…ä»£è¡¨ä¸ªäººå»ºè®®ã€‚token è¶…æ—¶çš„åˆ¤å®šå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚åšé€»è¾‘åˆ¤å®šï¼ŒåŠ å¯†æ¨èä½¿ç”¨ [crypto-js](https://github.com/brix/crypto-js)

#### HTTP ç¼“å­˜æœºåˆ¶ [:ledger:](#ä¸»è¦å†…å®¹åŒ…å«)

##### å¼ºåˆ¶ç¼“å­˜

> æœåŠ¡å™¨é€šçŸ¥æµè§ˆå™¨ä¸€ä¸ªç¼“å­˜æ—¶é—´ï¼Œåœ¨ç¼“å­˜æ—¶é—´å†…ï¼Œä¸‹æ¬¡è¯·æ±‚ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸åœ¨å°±æ‰§è¡Œæ¯”è¾ƒç¼“å­˜ç­–ç•¥ã€‚

##### æ¯”è¾ƒç¼“å­˜

> å°†ç¼“å­˜ä¿¡æ¯ä¸­çš„ Etag å’Œ Last-Modified é€šè¿‡è¯·æ±‚å‘ç»™æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨æ ¡éªŒï¼Œè¿”å› 304 çŠ¶æ€ç æ—¶å€™ï¼Œæµè§ˆå™¨ç›´æ¥å¯ç”¨ç¼“å­˜

#### HTTP å¸¸è§çŠ¶æ€ç  [:ledger:](#ä¸»è¦å†…å®¹åŒ…å«)

- 2 \*\*ï¼šæˆåŠŸ
  - 200ï¼šä¸€åˆ‡ ok
- 3 \*\*ï¼šé‡å®šå‘
  - 301ï¼šæ°¸ä¹…é‡å®šå‘
  - 302ï¼šä¸´æ—¶é‡å®šå‘
  - 304ï¼šä¹‹å‰ç¼“å­˜çš„
- 4 \*\*ï¼šå®¢æˆ·ç«¯é”™è¯¯
  - 400ï¼šè¯·æ±‚è¯­æ³•æœ‰è¯¯
  - 401ï¼šæ²¡æœ‰è®¤è¯ï¼Œtoken å¤±æ•ˆ
  - 403ï¼šå¯¹åº”èµ„æºç¦æ­¢è®¿é—®
  - 404ï¼šæ‰¾ä¸åˆ°å¯¹åº”èµ„æº
- 5 \*\*ï¼šæœåŠ¡ç«¯é”™è¯¯
  - 500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯
  - 503ï¼šæœåŠ¡å™¨æŒ‚äº†

#### å¸¸è§ HTTP çš„ Header [:ledger:](#ä¸»è¦å†…å®¹åŒ…å«)

```bash

content-type # è¯·æ±‚å­—æ®µæ ¼å¼/ç±»å‹
connection # tcp é•¿é“¾æ¥
Keep-Alive: # é•¿é“¾æ¥æ—¶é•¿
referer # è¯·æ±‚æ¥æº
accept # æ¥æ”¶ reponse æ•°æ®ç±»å‹
Accept-Encoding # æ¥æ”¶å†…å®¹å‹ç¼©ç±»å‹
Accept-Language # æ¥æ”¶è¯­è¨€
cookie # å‘é€è¯·æ±‚æ—¶ä¼šæŠŠåŒåŸŸåä¸‹çš„ cookie å‘é€è¿‡å»
```

#### ç¬¬ä¸€æ–¹ cookie å’Œç¬¬ä¸‰æ–¹ cookie [:ledger:](#ä¸»è¦å†…å®¹åŒ…å«)

##### ç¬¬ä¸€æ–¹ Cookie çš„ä¼˜åŠ¿å’Œåº”ç”¨ï¼š

> ç¬¬ä¸€æ–¹ Cookie çš„æœ€å¤§ä¼˜åŠ¿æ˜¯æ¥å—ç‡é«˜ã€‚ä¸€èˆ¬ä¸»æµçš„æµè§ˆå™¨çš„éƒ½ä¼šæœ‰éšç§çš„è®¾ç½®ï¼Œå¯ä»¥è®©ç”¨æˆ·è®¾ç½®æ˜¯å¦æ¥å— Cookieï¼Œæ¥å—å“ªäº› Cookieã€‚é™¤äº† å®Œå…¨ä¸æ¥å— Cookie è¿™ä¸ªè®¾ç½®ä»¥å¤–ï¼Œå…¶ä»–æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ–¹ Cookie éƒ½æ˜¯ä¼šè¢«ç”¨æˆ·æ¥å—çš„ï¼ˆä¸æ¥å—çš„è¯ï¼Œæ˜¯æ²¡åŠæ³•æŠŠé‚£å°å—æ•°æ®ä¿å­˜ä¸‹æ¥çš„ï¼‰ã€‚æ‰€ä»¥ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œä½¿ç”¨ç¬¬ä¸€æ–¹ Cookie ä¼šæ¯”ç¬¬ä¸‰æ–¹ Cookieï¼Œæˆ‘ä»¬é€šè¿‡åˆ†æå·¥å…·å¾—åˆ°çš„æ•°æ®ä¼šæ›´å‡†ç¡®ã€‚

##### ç¬¬ä¸‰æ–¹ Cookie çš„ä¼˜åŠ¿å’Œåº”ç”¨ï¼š

> ç¬¬ä¸‰æ–¹ Cookie çš„æ¥å—ç‡ä¸å¦‚ç¬¬ä¸€æ–¹ Cookieï¼ˆä¸è¿‡ä¸»æµçš„æµè§ˆå™¨é»˜è®¤çš„è®¾ç½®ä¸‹ä¹Ÿæ¥å—å¸¦ P3P åè®®çš„ç¬¬ä¸‰æ–¹ Cookieï¼Œæˆ‘çš„ç»éªŒæ˜¯æ¥å—ç‡èƒ½è¾¾ åˆ° 90ï¼…ï¼Œç”šè‡³ 95ï¼…ä»¥ä¸Šï¼‰ï¼Œä½†åœ¨æŸäº›ç‰¹å®šæƒ…å†µä¸‹å¯ä»¥å®ç°ç¬¬ä¸€æ–¹ Cookie æ— æ³•å®ç°çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬æœ‰å¤šä¸ªåŸŸåçš„ç½‘ç«™éœ€è¦è·Ÿè¸ªï¼Œæˆ‘ä»¬å¸Œæœ›äº†è§£åˆ°ç”¨æˆ·ç‚¹å‡»æŸä¸ªå¹¿å‘Šåˆ°è¾¾åŸŸå A ä¸‹çš„ç½‘é¡µï¼Œç„¶åå¯èƒ½æµè§ˆäº†ä¸è®ºé‚£ä¸ªåŸŸåä¸‹çš„é¡µé¢ï¼Œæœ€ååœ¨åŸŸå B ä¸‹çš„ç½‘é¡µå®Œæˆæ³¨å†Œçš„æƒ…å†µã€‚å¹¿å‘Šå¯ä»¥åœ¨åŸŸå A ä¸‹çš„ç½‘é¡µè¢«è·Ÿè¸ªåˆ°ï¼Œè€Œæ³¨å†Œå¯ä»¥åœ¨åŸŸå B ä¸‹çš„ç½‘é¡µè·Ÿè¸ªåˆ°ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸€æ–¹ Cookieï¼Œä¼šä¸ºåŸŸå A å»ºç«‹ä¸€ä¸ª Cookieï¼Œä¸ºåŸŸå B å†å»ºç«‹ä¸€ä¸ª Cookieï¼Œä»–ä»¬å¯ä»¥å…³è”å„è‡ªåŸŸåä¸‹ç½‘é¡µä¸Šçš„è¡Œä¸ºï¼Œä½†æ˜¯æ— æ³•å…³è”èµ·æ¥ã€‚è€Œä½¿ç”¨ç¬¬ä¸‰æ–¹ Cookieï¼Œé‚£ä¹ˆæ— è®ºå¤šå°‘ä¸ªåŸŸï¼Œéƒ½åªæœ‰ä¸€ä¸ª Cookieï¼Œä¸€ä¸ªå±äºç¬¬ä¸‰æ–¹åŸŸçš„ Cookieï¼Œç½‘ç«™ä¸‹æ‰€æœ‰åŸŸéƒ½èƒ½å…±äº«è¿™ä¸ª Cookieï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è¡Œä¸ºéƒ½èƒ½è¢«å…³è”èµ·æ¥åˆ†æã€‚

#### CSRF æ”»å‡»å®ä¾‹ [:ledger:](#ä¸»è¦å†…å®¹åŒ…å«)

CSRF è·¨ç«™åŸŸè¯·æ±‚ä¼ªé€  **_Cross Site Request Forgery_**

> CSRF æ”»å‡»å¯ä»¥åœ¨å—å®³è€…æ¯«ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ä»¥å—å®³è€…åä¹‰ä¼ªé€ è¯·æ±‚å‘é€ç»™å—æ”»å‡»ç«™ç‚¹ï¼Œä»è€Œåœ¨å¹¶æœªæˆæƒçš„æƒ…å†µä¸‹æ‰§è¡Œåœ¨æƒé™ä¿æŠ¤ä¹‹ä¸‹çš„æ“ä½œã€‚

æ¯”å¦‚è¯´ï¼Œå—å®³è€… Bob åœ¨é“¶è¡Œæœ‰ä¸€ç¬”å­˜æ¬¾ï¼Œé€šè¿‡å¯¹é“¶è¡Œçš„ç½‘ç«™å‘é€è¯·æ±‚ `http://bank.example/withdraw?account=bob&amount=1000000&for=bob2`å¯ä»¥ä½¿ Bob æŠŠ 1000000 çš„å­˜æ¬¾è½¬åˆ° bob2 çš„è´¦å·ä¸‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¯¥è¯·æ±‚å‘é€åˆ°ç½‘ç«™åï¼ŒæœåŠ¡å™¨ä¼šå…ˆéªŒè¯è¯¥è¯·æ±‚æ˜¯å¦æ¥è‡ªä¸€ä¸ªåˆæ³•çš„ sessionï¼Œå¹¶ä¸”è¯¥ session çš„ç”¨æˆ· Bob å·²ç»æˆåŠŸç™»é™†ã€‚é»‘å®¢ Mallory è‡ªå·±åœ¨è¯¥é“¶è¡Œä¹Ÿæœ‰è´¦æˆ·ï¼Œä»–çŸ¥é“ä¸Šæ–‡ä¸­çš„ URL å¯ä»¥æŠŠé’±è¿›è¡Œè½¬å¸æ“ä½œã€‚Mallory å¯ä»¥è‡ªå·±å‘é€ä¸€ä¸ªè¯·æ±‚ç»™é“¶è¡Œï¼š`http://bank.example/withdraw?account=bob&amount=1000000&for=Mallory`ã€‚ä½†æ˜¯è¿™ä¸ªè¯·æ±‚æ¥è‡ª Mallory è€Œé Bobï¼Œä»–ä¸èƒ½é€šè¿‡å®‰å…¨è®¤è¯ï¼Œå› æ­¤è¯¥è¯·æ±‚ä¸ä¼šèµ·ä½œç”¨ã€‚è¿™æ—¶ï¼ŒMallory æƒ³åˆ°ä½¿ç”¨ CSRF çš„æ”»å‡»æ–¹å¼ï¼Œä»–å…ˆè‡ªå·±åšä¸€ä¸ªç½‘ç«™ï¼Œåœ¨ç½‘ç«™ä¸­æ”¾å…¥å¦‚ä¸‹ä»£ç ï¼š `src=â€http://bank.example/withdraw?account=bob&amount=1000000&for=Mallory â€`ï¼Œå¹¶ä¸”é€šè¿‡å¹¿å‘Šç­‰è¯±ä½¿ Bob æ¥è®¿é—®ä»–çš„ç½‘ç«™ã€‚å½“ Bob è®¿é—®è¯¥ç½‘ç«™æ—¶ï¼Œä¸Šè¿° url å°±ä¼šä» Bob çš„æµè§ˆå™¨å‘å‘é“¶è¡Œï¼Œè€Œè¿™ä¸ªè¯·æ±‚ä¼šé™„å¸¦ Bob æµè§ˆå™¨ä¸­çš„ cookie ä¸€èµ·å‘å‘é“¶è¡ŒæœåŠ¡å™¨ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¯¥è¯·æ±‚ä¼šå¤±è´¥ï¼Œå› ä¸ºä»–è¦æ±‚ Bob çš„è®¤è¯ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœ Bob å½“æ—¶æ°å·§åˆšè®¿é—®ä»–çš„é“¶è¡Œåä¸ä¹…ï¼Œä»–çš„æµè§ˆå™¨ä¸é“¶è¡Œç½‘ç«™ä¹‹é—´çš„ session å°šæœªè¿‡æœŸï¼Œæµè§ˆå™¨çš„ cookie ä¹‹ä¸­å«æœ‰ Bob çš„è®¤è¯ä¿¡æ¯ã€‚è¿™æ—¶ï¼Œæ‚²å‰§å‘ç”Ÿäº†ï¼Œè¿™ä¸ª url è¯·æ±‚å°±ä¼šå¾—åˆ°å“åº”ï¼Œé’±å°†ä» Bob çš„è´¦å·è½¬ç§»åˆ° Mallory çš„è´¦å·ï¼Œè€Œ Bob å½“æ—¶æ¯«ä¸çŸ¥æƒ…ã€‚ç­‰ä»¥å Bob å‘ç°è´¦æˆ·é’±å°‘äº†ï¼Œå³ä½¿ä»–å»é“¶è¡ŒæŸ¥è¯¢æ—¥å¿—ï¼Œä»–ä¹Ÿåªèƒ½å‘ç°ç¡®å®æœ‰ä¸€ä¸ªæ¥è‡ªäºä»–æœ¬äººçš„åˆæ³•è¯·æ±‚è½¬ç§»äº†èµ„é‡‘ï¼Œæ²¡æœ‰ä»»ä½•è¢«æ”»å‡»çš„ç—•è¿¹ã€‚è€Œ Mallory åˆ™å¯ä»¥æ‹¿åˆ°é’±åé€é¥æ³•å¤–ã€‚

#### å½“å‰é˜²å¾¡ CSRF çš„å‡ ç§ç­–ç•¥ [:ledger:](#ä¸»è¦å†…å®¹åŒ…å«)

åœ¨ä¸šç•Œç›®å‰é˜²å¾¡ CSRF æ”»å‡»ä¸»è¦æœ‰ä¸‰ç§ç­–ç•¥ï¼š

- éªŒè¯ HTTP `Referer` å­—æ®µï¼›(åŒåŸŸè®¿é—®ï¼Œåœ¨ä¸åŒæµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œæœ‰äº›æ–¹æ³•å¯ä»¥ç¯¡æ”¹ `referer` çš„å€¼)
- åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ  token å¹¶éªŒè¯ï¼›(a å’Œ form æ ‡ç­¾ä¸­åŠ  tokenï¼Œé»‘å®¢å¯ä»¥é€šè¿‡ `referer` æ–¹å¼è·å¾— token)
- åœ¨ HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯ã€‚(æŠŠéªŒè¯åŠ å…¥åˆ° http å¤´éƒ¨çš„è‡ªå®šä¹‰å±æ€§(`Authorization`)ä¸­å»ã€‚é€šè¿‡ `XMLHttpRequest` ç±»å¯ä»¥æ·»åŠ ã€‚åœ¨é [SPA](https://baike.baidu.com/item/SPA/17536313?fr=aladdin) ä¸­å®ç°ä¸­ `è¿›è¡Œå‰è¿›` `ã€åé€€` `ã€åˆ·æ–°` ã€`æ”¶è—` ç­‰æ“ä½œä¸æ˜¯ç”±è¿™ä¸ªç±»å‘èµ·çš„ï¼Œå¤±å»æ•ˆæœã€‚ä»£ä»·å¤ªå¤§)

#### XSS è·¨ç«™è„šæœ¬æ”»å‡» [:ledger:](#ä¸»è¦å†…å®¹åŒ…å«)

XSS åˆå« CSS (**Cross Site Script**)ï¼ŒæŒ‡çš„æ˜¯æ¶æ„æ”»å‡»è€…å¾€ Web é¡µé¢é‡Œæ’å…¥æ¶æ„ html ä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­ Web é‡Œé¢çš„ html ä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„ç”¨æˆ·çš„ç‰¹æ®Šç›®çš„ã€‚

å¯ä»¥åˆ†æˆä¸‰ç±»:

- åå°„å‹ï¼šç»è¿‡åç«¯ï¼Œä¸ç»è¿‡æ•°æ®åº“(ä¸€èˆ¬è¡¨ç°ä¸ºå¸¦ XSS æ”»å‡»å‘é‡çš„é“¾æ¥ï¼ŒéæŒä¹…æ€§æ”»å‡»)
- å­˜å‚¨å‹ï¼šç»è¿‡åç«¯ï¼Œç»è¿‡æ•°æ®åº“(å°†æ”»å‡»ä»£ç å­˜å…¥æ•°æ®åº“ä¸­)
- DOMï¼šä¸ç»è¿‡åç«¯,DOM - based XSS æ¼æ´æ˜¯åŸºäºæ–‡æ¡£å¯¹è±¡æ¨¡å‹ (Document Objeet Model,DOM)çš„ä¸€ç§æ¼æ´,dom - xss æ˜¯é€šè¿‡ url ä¼ å…¥å‚æ•°å»æ§åˆ¶è§¦å‘çš„ã€‚(ç”¨æˆ·é€šè¿‡äº¤äº’è¿›è¡Œæ”»å‡»)
  ä¹Ÿå¯ä»¥åˆ†æˆä¸¤ç§ç±»å‹ï¼š
  - 1.éæŒä¹…å‹æ”»å‡»
  - 2.æŒä¹…å‹æ”»å‡»
